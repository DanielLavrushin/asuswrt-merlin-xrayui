import{_ as a,a as s}from"./20260222195218-BetfsQha.js";import{_ as r,c as o,a as e,o as n}from"./app-BsG86pRf.js";const i={};function l(d,t){return n(),o("div",null,[...t[0]||(t[0]=[e('<h1 id="b4sni-logs-монитор-sni-трафика" tabindex="-1"><a class="header-anchor" href="#b4sni-logs-монитор-sni-трафика"><span>B4SNI Logs - Монитор SNI трафика</span></a></h1><h2 id="что-такое-b4sni-logs" tabindex="-1"><a class="header-anchor" href="#что-такое-b4sni-logs"><span>Что такое B4SNI Logs?</span></a></h2><p><code>B4SNI Logs</code> - это функция мониторинга сети в <code>XRAYUI</code>, которая захватывает и отображает информацию <code>Server Name Indication</code> (SNI) из вашего сетевого трафика. SNI - это имя хоста, которое устройства запрашивают при установлении HTTPS-соединений, что позволяет видеть, к каким веб-сайтам и сервисам осуществляется доступ через вашу сеть.</p><h2 id="как-использовать" tabindex="-1"><a class="header-anchor" href="#как-использовать"><span>Как использовать</span></a></h2><h3 id="запуск-монитора" tabindex="-1"><a class="header-anchor" href="#запуск-монитора"><span>Запуск монитора</span></a></h3><ol><li>Перейдите в раздел <strong>B4SNI Logs</strong> в интерфейсе <code>XRAYUI</code> (в самом низу главного экрана) <img src="'+a+'" alt="b4sni"></li><li>Нажмите кнопку <strong>start</strong> для начала захвата SNI данных</li><li>Кнопка изменится на <strong>Stop</strong> когда служба запущена</li></ol><h3 id="просмотр-логов" tabindex="-1"><a class="header-anchor" href="#просмотр-логов"><span>Просмотр логов</span></a></h3><ol><li>Нажмите кнопку <strong>display</strong> чтобы открыть просмотр логов</li><li>Логи будут автоматически обновляться каждые 3 секунды пока окно открыто</li></ol><p><img src="'+s+'" alt="snilogs"></p><h3 id="режимы-просмотра" tabindex="-1"><a class="header-anchor" href="#режимы-просмотра"><span>Режимы просмотра</span></a></h3><p>Просмотрщик логов предоставляет три вкладки для анализа трафика:</p><h4 id="по-устроиствам-by-device" tabindex="-1"><a class="header-anchor" href="#по-устроиствам-by-device"><span>По устройствам (By Device)</span></a></h4><p>Группирует все захваченные домены по устройству LAN, которое к ним обращалось. Каждое устройство отображается как сворачиваемая карточка:</p><ul><li>Имя устройства (или IP-адрес если не распознано) и общее количество обращений</li><li>Таблица всех доменов, к которым обращалось устройство</li><li>Количество обращений к каждому домену, значки протоколов и время последнего обращения</li><li>Кнопка <strong>+ Rule</strong> у каждого домена для быстрого добавления в правило маршрутизации</li></ul><p>Карточки отсортированы по общему количеству обращений — наиболее активные устройства отображаются первыми.</p><h4 id="по-доменам-by-domain" tabindex="-1"><a class="header-anchor" href="#по-доменам-by-domain"><span>По доменам (By Domain)</span></a></h4><p>Агрегированная таблица всех захваченных доменов со всех устройств, отсортированная по количеству обращений:</p><table><thead><tr><th>Столбец</th><th>Описание</th></tr></thead><tbody><tr><td>Domain</td><td>Доменное имя SNI</td></tr><tr><td>Hits</td><td>Общее количество соединений с этим доменом</td></tr><tr><td>Protocols</td><td>Значки <code>TCP</code> (синий) и/или <code>UDP</code> (жёлтый)</td></tr><tr><td>Devices</td><td>Теги устройств, которые обращались к домену</td></tr><tr><td>Last Seen</td><td>Время последнего соединения</td></tr><tr><td>Action</td><td>Кнопка <strong>+ Rule</strong> для добавления домена в правило маршрутизации</td></tr></tbody></table><p>Используйте поле поиска для фильтрации доменов по имени.</p><h4 id="живои-поток-live-stream" tabindex="-1"><a class="header-anchor" href="#живои-поток-live-stream"><span>Живой поток (Live Stream)</span></a></h4><p>Просмотр логов в реальном времени, показывающий отдельные события соединений в обратном хронологическом порядке. Каждая запись содержит:</p><table><thead><tr><th>Поле</th><th>Описание</th></tr></thead><tbody><tr><td>Time</td><td>Когда было установлено соединение (формат ЧЧ:ММ:СС)</td></tr><tr><td>Protocol</td><td>Либо <code>TCP</code> (синий значок) или <code>UDP</code> (жёлтый значок)</td></tr><tr><td>Source</td><td>Устройство, устанавливающее соединение — показывает имя устройства если распознано, иначе IP-адрес, плюс номер порта</td></tr><tr><td>Destination</td><td>Сервер, к которому подключаются (IP:порт)</td></tr><tr><td>SNI</td><td>Доменное имя, к которому осуществляется доступ (например, google.com, netflix.com)</td></tr></tbody></table><p>Используйте поля поиска по столбцам для фильтрации по Protocol, Source, Destination или SNI.</p><h3 id="панель-статистики" tabindex="-1"><a class="header-anchor" href="#панель-статистики"><span>Панель статистики</span></a></h3><p>В верхней части просмотрщика логов вы увидите:</p><ul><li><strong>Total</strong>: Общее количество зарегистрированных соединений</li><li><strong>TCP/UDP</strong>: Разбивка по типу протокола</li><li><strong>Unique SNI</strong>: Количество различных доменов, к которым был доступ</li><li><strong>Top Domain</strong>: Наиболее часто запрашиваемый домен и его количество обращений</li><li><strong>Most Active Device</strong>: Устройство с наибольшим количеством соединений</li></ul><h3 id="добавление-доменов-в-правила-маршрутизации" tabindex="-1"><a class="header-anchor" href="#добавление-доменов-в-правила-маршрутизации"><span>Добавление доменов в правила маршрутизации</span></a></h3><p>Вы можете добавлять домены напрямую из логов SNI в правила маршрутизации Xray, не покидая просмотрщик логов:</p><ol><li>Нажмите кнопку <strong>+ Rule</strong> рядом с любым доменом</li><li>Появится всплывающее окно со списком существующих правил маршрутизации</li><li>Выберите существующее правило для добавления домена, <strong>или</strong> выберите <strong>New rule</strong> и укажите имя правила и outbound тег</li><li>Нажмите <strong>Confirm</strong> для добавления домена</li></ol><h4 id="массовыи-выбор" tabindex="-1"><a class="header-anchor" href="#массовыи-выбор"><span>Массовый выбор</span></a></h4><p>В режимах <strong>По устройствам</strong> и <strong>По доменам</strong> можно выбрать несколько доменов одновременно:</p><ul><li>Используйте чекбокс рядом с каждым доменом для индивидуального выбора</li><li>В режиме <strong>По устройствам</strong> используйте чекбокс на уровне устройства для выбора всех его доменов</li><li>В режиме <strong>По доменам</strong> используйте верхний чекбокс для выбора всех видимых доменов</li><li>При выборе доменов появляется панель массовых действий — нажмите <strong>Add selected to rule</strong> чтобы добавить их все сразу</li></ul><h3 id="управление-логами" tabindex="-1"><a class="header-anchor" href="#управление-логами"><span>Управление логами</span></a></h3><ul><li><strong>Clear Logs</strong>: Нажмите чтобы удалить все захваченные логи и начать заново</li><li><strong>Export CSV</strong>: Загрузить текущее представление как файл электронной таблицы. Экспортируемые столбцы зависят от активной вкладки: <ul><li><strong>Live Stream</strong>: Time, Protocol, Source IP, Source Port, Device, Dest IP, Dest Port, SNI</li><li><strong>By Domain</strong>: Domain, Hits, Protocols, Devices, First Seen, Last Seen</li><li><strong>By Device</strong>: Device, IP, Domain, Hits, Protocols</li></ul></li><li><strong>Raw</strong>: Просмотреть сырой файл логов в новой вкладке браузера</li></ul><h3 id="остановка-монитора" tabindex="-1"><a class="header-anchor" href="#остановка-монитора"><span>Остановка монитора</span></a></h3><p>Нажмите кнопку <strong>stop</strong> когда закончите мониторинг для экономии системных ресурсов.</p><h3 id="примечание-о-конфиденциальности" tabindex="-1"><a class="header-anchor" href="#примечание-о-конфиденциальности"><span>Примечание о конфиденциальности</span></a></h3><p>B4SNI Logs захватывает только доменные имена (SNI), а не фактическое содержимое вашего интернет-трафика. Это как видеть адрес на конверте, не открывая письмо.</p><h2 id="устранение-неполадок" tabindex="-1"><a class="header-anchor" href="#устранение-неполадок"><span>Устранение неполадок</span></a></h2><h3 id="логи-не-появляются" tabindex="-1"><a class="header-anchor" href="#логи-не-появляются"><span>Логи не появляются</span></a></h3><ul><li>Убедитесь, что служба запущена (нажата кнопка <code>start</code>)</li><li>Подождите несколько секунд для захвата трафика</li><li>Попробуйте обновить страницу</li><li>Проверьте, есть ли фактическая сетевая активность</li></ul><h3 id="имена-устроиств-не-отображаются" tabindex="-1"><a class="header-anchor" href="#имена-устроиств-не-отображаются"><span>Имена устройств не отображаются</span></a></h3><ul><li>Имена устройств появляются только для распознанных устройств в вашей сети</li><li>Новым устройствам может потребоваться время для идентификации</li><li>Гостевые устройства могут показывать только IP адреса</li></ul><h3 id="служба-не-запускается" tabindex="-1"><a class="header-anchor" href="#служба-не-запускается"><span>Служба не запускается</span></a></h3><ul><li>Возможно запущена другая служба мониторинга</li><li>Попробуйте остановить и запустить снова</li><li>Обновите интерфейс XRAYUI</li></ul><h3 id="логи-становятся-слишком-большими" tabindex="-1"><a class="header-anchor" href="#логи-становятся-слишком-большими"><span>Логи становятся слишком большими</span></a></h3><ul><li>Система автоматически ограничивает размер файла логов и ротирует их</li><li>Периодически используйте &quot;Clear Logs&quot; для начала с чистого листа</li><li>Экспортируйте важные логи перед очисткой</li></ul><h2 id="часто-задаваемые-вопросы" tabindex="-1"><a class="header-anchor" href="#часто-задаваемые-вопросы"><span>Часто задаваемые вопросы</span></a></h2><p><strong>В: Замедляет ли это мой интернет?</strong></p><p>О: Нет, B4SNI Logs работает пассивно и не влияет на производительность сети.</p><p><strong>В: Могу ли я видеть, что люди просматривают?</strong> О: Вы можете видеть доменные имена (как youtube.com), но не конкретные страницы или содержимое.</p><p><strong>В: Как долго хранятся логи?</strong></p><p>О: Логи хранятся до тех пор, пока вы их не очистите или не перезапустите службу. Система автоматически управляет размером файла.</p><p><strong>В: Могу ли я мониторить только определённые устройства?</strong></p><p>О: Мониторится весь трафик, но вы можете использовать вкладку <strong>По устройствам</strong> для фокусировки на конкретном устройстве, или фильтры в режиме <strong>Живой поток</strong> для просмотра трафика определённого источника.</p><p><strong>В: Можно ли добавить наблюдаемые домены в правила маршрутизации?</strong></p><p>О: Да! Используйте кнопку <strong>+ Rule</strong> у любого домена, или выберите несколько доменов и используйте массовое добавление. Это позволяет быстро создавать правила маршрутизации на основе реального трафика.</p>',57)])])}const p=r(i,[["render",l]]),g=JSON.parse('{"path":"/ru/b4sni.html","title":"B4SNI Logs - Монитор SNI трафика","lang":"ru-RU","frontmatter":{},"git":{"updatedTime":1771786482000,"contributors":[{"name":"Daniel Lavrushin","username":"","email":"lavrushin@gmail.com","commits":2}],"changelog":[{"hash":"05b3861ccd754b5310f31e0efa7796d1f59c4675","time":1771786482000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Refactor code structure for improved readability and maintainability"},{"hash":"68149b557ce1464c1b6bf2d9c01c698860a7a9e7","time":1761425437000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Add B4SNI Logs feature for monitoring SNI traffic"}]},"filePathRelative":"ru/b4sni.md"}');export{p as comp,g as data};
