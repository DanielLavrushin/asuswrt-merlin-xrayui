import{_ as t,a as o}from"./20260222195218-BetfsQha.js";import{_ as a,c as i,a as n,o as s}from"./app-BsG86pRf.js";const r={};function l(d,e){return s(),i("div",null,[...e[0]||(e[0]=[n('<h1 id="b4sni-logs-sni-traffic-monitor" tabindex="-1"><a class="header-anchor" href="#b4sni-logs-sni-traffic-monitor"><span>B4SNI Logs - SNI Traffic Monitor</span></a></h1><h2 id="what-is-b4sni-logs" tabindex="-1"><a class="header-anchor" href="#what-is-b4sni-logs"><span>What is B4SNI Logs?</span></a></h2><p>B4SNI Logs is a network monitoring feature in <code>XRAYUI</code> that captures and displays <code>Server Name Indication</code> (SNI) information from your network traffic. SNI is the hostname that devices request when making HTTPS connections, allowing you to see which websites and services are being accessed through your network.</p><h2 id="how-to-use" tabindex="-1"><a class="header-anchor" href="#how-to-use"><span>How to Use</span></a></h2><h3 id="starting-the-monitor" tabindex="-1"><a class="header-anchor" href="#starting-the-monitor"><span>Starting the Monitor</span></a></h3><ol><li>Navigate to the <strong>B4SNI Logs</strong> section in your <code>XRAYUI</code> interface (very bottom of the main screen) <img src="'+t+'" alt="b4sni"></li><li>Click the <strong>start</strong> button to begin capturing SNI data</li><li>The button will change to <strong>Stop</strong> when the service is running</li></ol><h3 id="viewing-logs" tabindex="-1"><a class="header-anchor" href="#viewing-logs"><span>Viewing Logs</span></a></h3><ol><li>Click the <strong>display</strong> button to open the log viewer</li><li>Logs will automatically refresh every 3 seconds while the window is open</li></ol><p><img src="'+o+'" alt="snilogs"></p><h3 id="view-modes" tabindex="-1"><a class="header-anchor" href="#view-modes"><span>View Modes</span></a></h3><p>The log viewer provides three different tabs to analyze your traffic:</p><h4 id="by-device" tabindex="-1"><a class="header-anchor" href="#by-device"><span>By Device</span></a></h4><p>Groups all captured domains by the LAN device that accessed them. Each device appears as a collapsible card showing:</p><ul><li>Device name (or IP address if unrecognized) and total hit count</li><li>A table of all domains accessed by that device</li><li>Per-domain hit count, protocol badges, and last seen time</li><li><strong>+ Rule</strong> button on each domain row to quickly add it to a routing rule</li></ul><p>Cards are sorted by total hits, so the most active devices appear first.</p><h4 id="by-domain" tabindex="-1"><a class="header-anchor" href="#by-domain"><span>By Domain</span></a></h4><p>An aggregated table showing all captured domains across all devices, sorted by hit count:</p><table><thead><tr><th>Column</th><th>Description</th></tr></thead><tbody><tr><td>Domain</td><td>The SNI domain name</td></tr><tr><td>Hits</td><td>Total number of connections to this domain</td></tr><tr><td>Protocols</td><td><code>TCP</code> (blue) and/or <code>UDP</code> (yellow) badges</td></tr><tr><td>Devices</td><td>Tags showing which devices accessed this domain</td></tr><tr><td>Last Seen</td><td>Timestamp of the most recent connection</td></tr><tr><td>Action</td><td><strong>+ Rule</strong> button to add the domain to a routing rule</td></tr></tbody></table><p>Use the search box to filter domains by name.</p><h4 id="live-stream" tabindex="-1"><a class="header-anchor" href="#live-stream"><span>Live Stream</span></a></h4><p>The real-time log view showing individual connection events in reverse chronological order. Each entry shows:</p><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Time</td><td>When the connection was made (HH:MM:SS format)</td></tr><tr><td>Protocol</td><td>Either <code>TCP</code> (blue badge) or <code>UDP</code> (yellow badge)</td></tr><tr><td>Source</td><td>The device making the connection — shows device name if recognized, otherwise IP address, plus the port number</td></tr><tr><td>Destination</td><td>The server being connected to (IP:port)</td></tr><tr><td>SNI</td><td>The domain name being accessed (e.g., google.com, netflix.com)</td></tr></tbody></table><p>Use the per-column search boxes to filter by Protocol, Source, Destination, or SNI.</p><h3 id="statistics-bar" tabindex="-1"><a class="header-anchor" href="#statistics-bar"><span>Statistics Bar</span></a></h3><p>At the top of the log viewer, you&#39;ll see:</p><ul><li><strong>Total</strong>: Total number of connections logged</li><li><strong>TCP/UDP</strong>: Breakdown by protocol type</li><li><strong>Unique SNI</strong>: Number of different domains accessed</li><li><strong>Top Domain</strong>: The most frequently accessed domain and its hit count</li><li><strong>Most Active Device</strong>: The device with the most connections</li></ul><h3 id="adding-domains-to-routing-rules" tabindex="-1"><a class="header-anchor" href="#adding-domains-to-routing-rules"><span>Adding Domains to Routing Rules</span></a></h3><p>You can add domains directly from SNI logs to your Xray routing rules without leaving the log viewer:</p><ol><li>Click the <strong>+ Rule</strong> button next to any domain</li><li>A popover will appear listing your existing routing rules</li><li>Select an existing rule to add the domain to, <strong>or</strong> choose <strong>New rule</strong> and provide a rule name and outbound tag</li><li>Click <strong>Confirm</strong> to add the domain</li></ol><h4 id="bulk-selection" tabindex="-1"><a class="header-anchor" href="#bulk-selection"><span>Bulk Selection</span></a></h4><p>In the <strong>By Device</strong> and <strong>By Domain</strong> views, you can select multiple domains at once:</p><ul><li>Use the checkbox next to each domain to select it individually</li><li>In <strong>By Device</strong> view, use the device-level checkbox to select all domains for a device</li><li>In <strong>By Domain</strong> view, use the top checkbox to select all visible domains</li><li>When domains are selected, a bulk action bar appears — click <strong>Add selected to rule</strong> to add them all at once</li></ul><h3 id="managing-logs" tabindex="-1"><a class="header-anchor" href="#managing-logs"><span>Managing Logs</span></a></h3><ul><li><strong>Clear Logs</strong>: Click to remove all captured logs and start fresh</li><li><strong>Export CSV</strong>: Download the current view as a spreadsheet file. The exported columns depend on the active tab: <ul><li><strong>Live Stream</strong>: Time, Protocol, Source IP, Source Port, Device, Dest IP, Dest Port, SNI</li><li><strong>By Domain</strong>: Domain, Hits, Protocols, Devices, First Seen, Last Seen</li><li><strong>By Device</strong>: Device, IP, Domain, Hits, Protocols</li></ul></li><li><strong>Raw</strong>: View the raw log file in a new browser tab</li></ul><h3 id="stopping-the-monitor" tabindex="-1"><a class="header-anchor" href="#stopping-the-monitor"><span>Stopping the Monitor</span></a></h3><p>Click the <strong>stop</strong> button when you&#39;re done monitoring to conserve system resources.</p><h3 id="privacy-note" tabindex="-1"><a class="header-anchor" href="#privacy-note"><span>Privacy Note</span></a></h3><p>B4SNI Logs only captures the domain names (SNI), not the actual content of your internet traffic. It&#39;s like seeing the address on an envelope without opening the letter.</p><h2 id="troubleshooting" tabindex="-1"><a class="header-anchor" href="#troubleshooting"><span>Troubleshooting</span></a></h2><h3 id="no-logs-appearing" tabindex="-1"><a class="header-anchor" href="#no-logs-appearing"><span>No Logs Appearing</span></a></h3><ul><li>Make sure the service is started (<code>start</code> button clicked)</li><li>Wait a few seconds for traffic to be captured</li><li>Try refreshing the page</li><li>Check if there&#39;s actual network activity</li></ul><h3 id="device-names-not-showing" tabindex="-1"><a class="header-anchor" href="#device-names-not-showing"><span>Device Names Not Showing</span></a></h3><ul><li>Device names only appear for recognized devices on your network</li><li>New devices may take time to be identified</li><li>Guest devices might only show IP addresses</li></ul><h3 id="service-won-t-start" tabindex="-1"><a class="header-anchor" href="#service-won-t-start"><span>Service Won&#39;t Start</span></a></h3><ul><li>Another monitoring service might be running</li><li>Try stopping and starting again</li><li>Refresh the XRAYUI interface</li></ul><h3 id="logs-growing-too-large" tabindex="-1"><a class="header-anchor" href="#logs-growing-too-large"><span>Logs Growing Too Large</span></a></h3><ul><li>The system automatically limits log file size and rotates logs</li><li>Use &quot;Clear Logs&quot; periodically to start fresh</li><li>Export important logs before clearing</li></ul><h2 id="frequently-asked-questions" tabindex="-1"><a class="header-anchor" href="#frequently-asked-questions"><span>Frequently Asked Questions</span></a></h2><p><strong>Q: Does this slow down my internet?</strong></p><p>A: No, B4SNI Logs operates passively and doesn&#39;t impact network performance.</p><p><strong>Q: Can I see what people are browsing?</strong> A: You can see domain names (like youtube.com) but not specific pages or content.</p><p><strong>Q: How long are logs kept?</strong></p><p>A: Logs are kept until you clear them or restart the service. The system automatically manages file size.</p><p><strong>Q: Can I monitor specific devices only?</strong></p><p>A: All traffic is monitored, but you can use the <strong>By Device</strong> tab to focus on a specific device, or use filters in <strong>Live Stream</strong> to view traffic from a particular source.</p><p><strong>Q: Can I add monitored domains to routing rules?</strong></p><p>A: Yes! Use the <strong>+ Rule</strong> button on any domain row, or select multiple domains and use bulk add. This lets you quickly build routing rules based on real traffic you observe.</p>',57)])])}const g=a(r,[["render",l]]),p=JSON.parse('{"path":"/en/b4sni.html","title":"B4SNI Logs - SNI Traffic Monitor","lang":"en-US","frontmatter":{},"git":{"updatedTime":1771786482000,"contributors":[{"name":"Daniel Lavrushin","username":"","email":"lavrushin@gmail.com","commits":2}],"changelog":[{"hash":"05b3861ccd754b5310f31e0efa7796d1f59c4675","time":1771786482000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Refactor code structure for improved readability and maintainability"},{"hash":"68149b557ce1464c1b6bf2d9c01c698860a7a9e7","time":1761425437000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Add B4SNI Logs feature for monitoring SNI traffic"}]},"filePathRelative":"en/b4sni.md"}');export{g as comp,p as data};
