import{_ as l,c as u,a as t,b as e,d as r,w as n,r as o,o as d,e as s}from"./app-BsG86pRf.js";const p={},c={class:"table-of-contents"};function x(y,a){const i=o("router-link");return d(),u("div",null,[a[28]||(a[28]=t('<h1 id="командная-строка-cli" tabindex="-1"><a class="header-anchor" href="#командная-строка-cli"><span>Командная строка (CLI)</span></a></h1><p><code>XRAYUI</code> располагается по пути <code>/jffs/scripts/xrayui</code> и запускается по <code>SSH</code> на вашем роутере. Допустима краткая запись:<code>xrayui &lt;команда&gt;</code> вместо полного <code>/jffs/scripts/xrayui &lt;команда&gt;</code>.</p><h2 id="quick-reference" tabindex="-1"><a class="header-anchor" href="#quick-reference"><span>Quick reference</span></a></h2>',3)),e("nav",c,[e("ul",null,[e("li",null,[r(i,{to:"#quick-reference"},{default:n(()=>[...a[0]||(a[0]=[s("Quick reference",-1)])]),_:1})]),e("li",null,[r(i,{to:"#управление-сервисом"},{default:n(()=>[...a[1]||(a[1]=[s("Управление сервисом",-1)])]),_:1}),e("ul",null,[e("li",null,[r(i,{to:"#xrayui-start"},{default:n(()=>[...a[2]||(a[2]=[s("xrayui start",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-stop"},{default:n(()=>[...a[3]||(a[3]=[s("xrayui stop",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-restart"},{default:n(()=>[...a[4]||(a[4]=[s("xrayui restart",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-version"},{default:n(()=>[...a[5]||(a[5]=[s("xrayui version",-1)])]),_:1})])])]),e("li",null,[r(i,{to:"#обновления"},{default:n(()=>[...a[6]||(a[6]=[s("Обновления",-1)])]),_:1}),e("ul",null,[e("li",null,[r(i,{to:"#xrayui-update"},{default:n(()=>[...a[7]||(a[7]=[s("xrayui update",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-update-version"},{default:n(()=>[...a[8]||(a[8]=[s("xrayui update <version>",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-update-xray-version-latest"},{default:n(()=>[...a[9]||(a[9]=[s("xrayui update xray <version|latest>",-1)])]),_:1})])])]),e("li",null,[r(i,{to:"#состояние-и-диагностика"},{default:n(()=>[...a[10]||(a[10]=[s("Состояние и диагностика",-1)])]),_:1}),e("ul",null,[e("li",null,[r(i,{to:"#xrayui-fixme"},{default:n(()=>[...a[11]||(a[11]=[s("xrayui fixme",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-diagnostics"},{default:n(()=>[...a[12]||(a[12]=[s("xrayui diagnostics",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-diagnostics-xrayui"},{default:n(()=>[...a[13]||(a[13]=[s("xrayui diagnostics xrayui",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-diagnostics-env"},{default:n(()=>[...a[14]||(a[14]=[s("xrayui diagnostics env",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-diagnostics-iptables"},{default:n(()=>[...a[15]||(a[15]=[s("xrayui diagnostics iptables",-1)])]),_:1})])])]),e("li",null,[r(i,{to:"#автоматизация-cron"},{default:n(()=>[...a[16]||(a[16]=[s("Автоматизация (cron)",-1)])]),_:1}),e("ul",null,[e("li",null,[r(i,{to:"#xrayui-cron-addjobs"},{default:n(()=>[...a[17]||(a[17]=[s("xrayui cron addjobs",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-cron-deletejobs"},{default:n(()=>[...a[18]||(a[18]=[s("xrayui cron deletejobs",-1)])]),_:1})])])]),e("li",null,[r(i,{to:"#установка-резервное-копирование-и-обслуживание-ui"},{default:n(()=>[...a[19]||(a[19]=[s("Установка, резервное копирование и обслуживание UI",-1)])]),_:1}),e("ul",null,[e("li",null,[r(i,{to:"#xrayui-install-xrayui-uninstall"},{default:n(()=>[...a[20]||(a[20]=[s("xrayui install / xrayui uninstall",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-backup"},{default:n(()=>[...a[21]||(a[21]=[s("xrayui backup",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-remount-ui"},{default:n(()=>[...a[22]||(a[22]=[s("xrayui remount_ui",-1)])]),_:1})])])]),e("li",null,[r(i,{to:"#дополнительно-сервисные-события"},{default:n(()=>[...a[23]||(a[23]=[s("Дополнительно: сервисные события",-1)])]),_:1}),e("ul",null,[e("li",null,[r(i,{to:"#xrayui-service-event-startup"},{default:n(()=>[...a[24]||(a[24]=[s("xrayui service_event startup",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-service-event-configuration-logs-fetch"},{default:n(()=>[...a[25]||(a[25]=[s("xrayui service_event configuration logs fetch",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-service-event-firewall-configure"},{default:n(()=>[...a[26]||(a[26]=[s("xrayui service_event firewall configure",-1)])]),_:1})]),e("li",null,[r(i,{to:"#xrayui-service-event-firewall-cleanup"},{default:n(()=>[...a[27]||(a[27]=[s("xrayui service_event firewall cleanup",-1)])]),_:1})])])])])]),a[29]||(a[29]=t(`<h2 id="управление-сервисом" tabindex="-1"><a class="header-anchor" href="#управление-сервисом"><span>Управление сервисом</span></a></h2><h3 id="xrayui-start" tabindex="-1"><a class="header-anchor" href="#xrayui-start"><span><code>xrayui start</code></span></a></h3><p>Запускает Xray и все зависимости интерфейса; при необходимости настраивает маршрутизацию и политики.</p><h3 id="xrayui-stop" tabindex="-1"><a class="header-anchor" href="#xrayui-stop"><span><code>xrayui stop</code></span></a></h3><p>Корректно останавливает Xray и удаляет правила/маршруты, добавленные XRAYUI.</p><h3 id="xrayui-restart" tabindex="-1"><a class="header-anchor" href="#xrayui-restart"><span><code>xrayui restart</code></span></a></h3><p>Останавливает и заново запускает Xray; формирует маршруты «с нуля».</p><h3 id="xrayui-version" tabindex="-1"><a class="header-anchor" href="#xrayui-version"><span><code>xrayui version</code></span></a></h3><p>Печатает установленную версию XRAYUI и версию <code>Xray-core</code>.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">xrayui version</span>
<span class="line"><span class="token comment"># XRAYUI: 0.56.1, XRAY-CORE: 25.6.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="обновления" tabindex="-1"><a class="header-anchor" href="#обновления"><span>Обновления</span></a></h2><h3 id="xrayui-update" tabindex="-1"><a class="header-anchor" href="#xrayui-update"><span><code>xrayui update</code></span></a></h3><p>Обновляет XRAYUI до последнего стабильного релиза.</p><h3 id="xrayui-update-version" tabindex="-1"><a class="header-anchor" href="#xrayui-update-version"><span><code>xrayui update &lt;version&gt;</code></span></a></h3><p>Устанавливает указанную версию XRAYUI.</p><h3 id="xrayui-update-xray-version-latest" tabindex="-1"><a class="header-anchor" href="#xrayui-update-xray-version-latest"><span><code>xrayui update xray &lt;version|latest&gt;</code></span></a></h3><p>Устанавливает указанную версию <code>Xray-core</code>.</p><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>Загрузки выполняются с GitHub. Если GitHub блокируется/ограничивается, включите Использовать прокси GitHub в <a href="general-options#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8-github">Общих настройках</a>.</p></div><h2 id="состояние-и-диагностика" tabindex="-1"><a class="header-anchor" href="#состояние-и-диагностика"><span>Состояние и диагностика</span></a></h2><h3 id="xrayui-fixme" tabindex="-1"><a class="header-anchor" href="#xrayui-fixme"><span><code>xrayui fixme</code></span></a></h3><p>Быстрая самодиагностика с попыткой безопасного авто-исправления.</p><h3 id="xrayui-diagnostics" tabindex="-1"><a class="header-anchor" href="#xrayui-diagnostics"><span><code>xrayui diagnostics</code></span></a></h3><p>Полный диагностический набор: сведения об окружении, правила iptables/маршрутизации и проверки XRAYUI.</p><h3 id="xrayui-diagnostics-xrayui" tabindex="-1"><a class="header-anchor" href="#xrayui-diagnostics-xrayui"><span><code>xrayui diagnostics xrayui</code></span></a></h3><p>Диагностика, сфокусированная на файлах XRAYUI, статусе и сервисных триггерах.</p><h3 id="xrayui-diagnostics-env" tabindex="-1"><a class="header-anchor" href="#xrayui-diagnostics-env"><span><code>xrayui diagnostics env</code></span></a></h3><p>Сбор системной и окруженческой информации, релевантной работе Xray.</p><h3 id="xrayui-diagnostics-iptables" tabindex="-1"><a class="header-anchor" href="#xrayui-diagnostics-iptables"><span><code>xrayui diagnostics iptables</code></span></a></h3><p>Проверка правил маршрутизации/брандмауэра, которыми управляет XRAYUI.</p><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>Вывод команд диагностики пригоден для отправки в <a href="https://t.me/asusxray" target="_blank" rel="noopener noreferrer">группу телеграм</a> при разборе проблем.</p></div><h2 id="автоматизация-cron" tabindex="-1"><a class="header-anchor" href="#автоматизация-cron"><span>Автоматизация (cron)</span></a></h2><h3 id="xrayui-cron-addjobs" tabindex="-1"><a class="header-anchor" href="#xrayui-cron-addjobs"><span><code>xrayui cron addjobs</code></span></a></h3><p>Создаёт рекомендуемые задания cron: ротация логов, проверка обновлений, ночное обновление геоданных.</p><h3 id="xrayui-cron-deletejobs" tabindex="-1"><a class="header-anchor" href="#xrayui-cron-deletejobs"><span><code>xrayui cron deletejobs</code></span></a></h3><p>Удаляет все задания cron, ранее созданные <code>addjobs</code>.</p><h2 id="установка-резервное-копирование-и-обслуживание-ui" tabindex="-1"><a class="header-anchor" href="#установка-резервное-копирование-и-обслуживание-ui"><span>Установка, резервное копирование и обслуживание UI</span></a></h2><h3 id="xrayui-install-xrayui-uninstall" tabindex="-1"><a class="header-anchor" href="#xrayui-install-xrayui-uninstall"><span><code>xrayui install</code> / <code>xrayui uninstall</code></span></a></h3><p>Установить или полностью удалить плагин и его сервис.</p><h3 id="xrayui-backup" tabindex="-1"><a class="header-anchor" href="#xrayui-backup"><span><code>xrayui backup</code></span></a></h3><p>Создать резервную копию конфигурации и данных, которую можно скопировать с роутера. Резервные копии сохраняются в каталоге <code>/opt/share/xrayui/backup</code>.</p><p>На данный момент XRAYUI сохраняет следующие сущности:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">/jffs/xrayui_custom <span class="token comment"># user xrayui trigger scripts</span></span>
<span class="line">/opt/etc/xray <span class="token comment"># all JSON files and certificates</span></span>
<span class="line">/opt/etc/xrayui.conf <span class="token comment"># config file containing xrayui general settings</span></span>
<span class="line">/opt/share/xrayui/data <span class="token comment"># user defined geodat decompiled (sources) files</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container caution"><p class="hint-container-title">Предупреждение</p><p>На данный момент автоматического восстановления из бэкапа нет — восстановление выполняется вручную.</p></div><h3 id="xrayui-remount-ui" tabindex="-1"><a class="header-anchor" href="#xrayui-remount-ui"><span><code>xrayui remount_ui</code></span></a></h3><p>Повторно подключить вкладку X-RAY к веб-интерфейсу (полезно после обновлений прошивки/веб-UI).</p><h2 id="дополнительно-сервисные-события" tabindex="-1"><a class="header-anchor" href="#дополнительно-сервисные-события"><span>Дополнительно: сервисные события</span></a></h2><p>Эти команды обычно вызываются хуками или из веб-интерфейса, но их безопасно запускать из SSH при диагностике.</p><h3 id="xrayui-service-event-startup" tabindex="-1"><a class="header-anchor" href="#xrayui-service-event-startup"><span><code>xrayui service_event startup</code></span></a></h3><p>Инициализация после загрузки.</p><h3 id="xrayui-service-event-configuration-logs-fetch" tabindex="-1"><a class="header-anchor" href="#xrayui-service-event-configuration-logs-fetch"><span><code>xrayui service_event configuration logs fetch</code></span></a></h3><p>Экспорт логов сервиса в просмотрщик логов веб-интерфейса.</p><h3 id="xrayui-service-event-firewall-configure" tabindex="-1"><a class="header-anchor" href="#xrayui-service-event-firewall-configure"><span><code>xrayui service_event firewall configure</code></span></a></h3><p>Применить правила <code>iptables</code> без перезапуска Xray.</p><h3 id="xrayui-service-event-firewall-cleanup" tabindex="-1"><a class="header-anchor" href="#xrayui-service-event-firewall-cleanup"><span><code>xrayui service_event firewall cleanup</code></span></a></h3><p>Удалить правила <code>iptables</code> без перезапуска Xray.</p>`,55))])}const f=l(p,[["render",x]]),v=JSON.parse('{"path":"/ru/cli.html","title":"Командная строка (CLI)","lang":"ru-RU","frontmatter":{},"git":{"updatedTime":1755366072000,"contributors":[{"name":"Daniel Lavrushin","username":"","email":"lavrushin@gmail.com","commits":1}],"changelog":[{"hash":"62390969d4ef2511bf75a2b7b27630f8014b8303","time":1755366072000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Add comprehensive documentation for XRAYUI features and configurations"}]},"filePathRelative":"ru/cli.md"}');export{f as comp,v as data};
