import{_ as s}from"./20250902212115-_KGnQBw1.js";import{_ as i,c as o,a as t,o as n}from"./app-eTybrgsj.js";const a="/asuswrt-merlin-xrayui/assets/20250902215014-BBSkY3Th.png",r="/asuswrt-merlin-xrayui/assets/20250902215154-znlDmXvp.png",d="/asuswrt-merlin-xrayui/assets/20250902215215-CfczCYc6.png",c="/asuswrt-merlin-xrayui/assets/20250902215347-C80X5EgR.png",l="/asuswrt-merlin-xrayui/assets/20250902215117-Fh5PhIGa.png",p={};function m(g,e){return n(),o("div",null,e[0]||(e[0]=[t('<h1 id="пользовательские-geosite-фаилы" tabindex="-1"><a class="header-anchor" href="#пользовательские-geosite-фаилы"><span>Пользовательские Geosite файлы</span></a></h1><p>Иногда важно добавить большое количество доменов в правила. Из-за ограничений прошивки MerlinWRT невозможно включать большие списки напрямую через интерфейс.</p><p>Вместо этого вы можете создавать собственные geosite-файлы доменов и ссылаться на них в правилах с помощью тегов.</p><p><img src="'+s+`" alt="geosite"></p><h2 id="что-такое-geosite-фаилы" tabindex="-1"><a class="header-anchor" href="#что-такое-geosite-фаилы"><span>Что такое Geosite файлы?</span></a></h2><p>В <strong>Xray</strong> geosite-файлы позволяют группировать домены в переиспользуемые наборы (называемые <em>тегами</em>).<br> Эти теги затем можно использовать в правилах маршрутизации, чтобы определить, как должен обрабатываться трафик (например: напрямую, через прокси, блокировка).</p><p>Geosite-файлы по сути представляют собой коллекции шаблонов доменов. Поддерживаются разные типы сопоставлений:</p><ul><li><code>domain:</code> – сопоставляет домен и все его поддомены (например, <code>domain:google.com</code> совпадает с <code>google.com</code> и поддоменами, такими как <code>mail.google.com</code>).</li><li><code>full:</code> – точное совпадение домена (например, <code>full:github.com</code> совпадает только с <code>github.com</code>).</li><li><code>regexp:</code> – сопоставление по регулярным выражениям (например, <code>regexp:.*\\.gov</code>).</li><li><code>keyword:</code> – сопоставление доменов, содержащих ключевое слово (например, <code>keyword:bank</code>).</li></ul><p>По умолчанию Xray использует предсобранную базу geosite (<code>/opt/sbin/geosite.dat</code>), но с помощью XRAYUI можно расширять её, создавая собственные geosite-файлы (хранятся в <code>/opt/sbin/xrayui</code>).<br> Это даёт полный контроль над группировкой доменов в теги для использования в правилах маршрутизации.</p><p>Например, можно создать отдельную группу для стриминговых сервисов:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">domain:netflix.com</span>
<span class="line">domain:hulu.com</span>
<span class="line">domain:disneyplus.com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>и затем использовать тег <code>ext:xrayui:streaming</code> в правилах.</p><hr><h2 id="общая-информация" tabindex="-1"><a class="header-anchor" href="#общая-информация"><span>Общая информация</span></a></h2><p>Есть два способа добавить домены в пользовательский geosite-файл XRAYUI:</p><ul><li>Через UI-интерфейс. Однако прошивка Merlin ограничивает размер списка (до 8000 символов на файл).</li><li>Создать файл напрямую на роутере и пересобрать geosite-файл через UI (без ограничений по размеру).</li></ul><hr><h2 id="обзор-интерфеиса" tabindex="-1"><a class="header-anchor" href="#обзор-интерфеиса"><span>Обзор интерфейса</span></a></h2><p>В разделе <code>Маршрутизация</code> найдите строку <strong>лок. файлы</strong> и нажмите кнопку <strong>Метаданные GeoIP/GeoSite</strong>.<br><img src="`+a+'" alt="строка"></p><p>Появится всплывающее окно:<br><img src="'+r+'" alt="новый"><img src="'+d+'" alt="новый2"></p><ul><li>Выберите файл из выпадающего списка, чтобы создать новый или управлять существующим.</li><li>Нажмите кнопку <strong>перекомпилировать всё</strong>, чтобы пересобрать все существующие файлы в geosite.</li></ul><p>При выборе файла (нового или существующего) появятся дополнительные опции:</p><p><img src="'+c+`" alt="редактировать"></p><ul><li>Укажите общее имя (<strong>тег</strong>) для группы доменов.</li><li><strong>Содержание</strong> – добавьте домены, которые хотите включить в geosite-файл.</li></ul><div class="hint-container tip"><p class="hint-container-title">domains</p><p>Можно использовать стандартные правила geosite (например, префиксы <code>domain:</code>, <code>regexp:</code>, <code>full:</code>, или даже использовать префикс <code>url:</code>).</p></div><p>Вы также можете добавить специальный префикс <code>url:</code> – ссылку (URL) на онлайн-список доменов.<br> Если задан <code>url:</code>, DatBuilder загрузит домены из этого источника и добавит их в текущую категорию.<br> Вот пример такого <a href="https://raw.githubusercontent.com/itdoginfo/allow-domains/main/Russia/inside-raw.lst" target="_blank" rel="noopener noreferrer">источника URL</a>. Например:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">url:https://raw.githubusercontent.com/itdoginfo/allow-domains/main/Russia/inside-raw.lst</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Можно использовать несколько ссылок в одной категории. Главное, чтобы каждая ссылка была расположена в новой строке с префиксом <code>url:</code>.</p><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>Это чрезвычайно полезная функция, когда вы хотите собирать динамические пользовательские <code>dat</code>-файлы.<br> В разделе общих настроек вы можете включить <a href="general-options#%D0%B0%D0%B2%D1%82%D0%BE%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B8%D0%BB%D0%BE%D0%B2-%D0%B3%D0%B5%D0%BE%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">Автообновление файлов geodata</a>, и XRAYUI автоматически загрузит все указанные источники и пересоберёт <code>dat</code>-файл.</p></div><p>Нажмите кнопку <strong>компилировать</strong>, чтобы пересобрать geosite-файл.</p><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Обратите внимание на жёлтый ярлык <code>ext:xrayui:xxxx</code> в правом верхнем углу. Это тег, который вы будете использовать в правилах. Его можно скопировать и вставить.</p></div><hr><h2 id="обновление-доменов-напрямую" tabindex="-1"><a class="header-anchor" href="#обновление-доменов-напрямую"><span>Обновление доменов напрямую</span></a></h2><p>Если у вас очень большой список доменов, загрузить его через веб-интерфейс нельзя из-за ограничений прошивки MerlinWRT.<br> Однако это можно сделать вручную.</p><ol><li>Создайте файл без расширения (например: <code>mydomains</code>).</li><li>Загрузите этот файл в директорию <code>/opt/share/xrayui/data</code>.</li></ol><p>Далее перейдите в <strong>Метаданные GeoIP/GeoSite</strong> в разделе <code>Маршрутизация</code>:<br><img src="`+a+'" alt="строка"></p><p>Нажмите кнопку <strong>перекомпилировать всё</strong>. Это пересоберёт все файлы внутри <code>/opt/share/xrayui/data</code> без необходимости редактировать их через UI.</p><p>После этого используйте тег <code>ext:xrayui:mydomains</code> в правилах как обычно.</p><hr><h2 id="пример-использования-в-правилах-xray" tabindex="-1"><a class="header-anchor" href="#пример-использования-в-правилах-xray"><span>Пример использования в правилах Xray</span></a></h2><p>Когда ваш geosite-файл готов, его можно использовать в разделе <code>Маршрутизация</code>. Например:</p><p><img src="'+l+'" alt="правила"></p><p>Обратите внимание на функцию автодополнения. Она поможет корректно выбрать нужную группу доменов из списка.</p>',43)]))}const x=i(p,[["render",m]]),b=JSON.parse('{"path":"/ru/custom-geodata.html","title":"Пользовательские Geosite файлы","lang":"ru-RU","frontmatter":{},"git":{"updatedTime":1757346344000,"contributors":[{"name":"Daniel Lavrushin","username":"","email":"lavrushin@gmail.com","commits":2}],"changelog":[{"hash":"d4c3147d892288aa13403d5852ec8b65224d8304","time":1757346344000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"fix: Refactor geodata update process and add URL fetching functionality"},{"hash":"6f3c3543635bbdd5abc97e89d3a907a66e20d92e","time":1756842931000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Add custom geosite files documentation in English and Russian"}]},"filePathRelative":"ru/custom-geodata.md"}');export{x as comp,b as data};
