import{_ as o,c as l,a as i,b as s,d as e,w as t,r as d,o as p,e as r}from"./app-eTybrgsj.js";const u="/asuswrt-merlin-xrayui/assets/20250816183727-CwKgF253.png",h="/asuswrt-merlin-xrayui/assets/20250816183810-BWhIqMVL.png",g="/asuswrt-merlin-xrayui/assets/20250816183834-DeqUYBCX.png",c="/asuswrt-merlin-xrayui/assets/20250816183852-BH74Dhl3.png",f="/asuswrt-merlin-xrayui/assets/20250816183917-VljPdlIn.png",b="/asuswrt-merlin-xrayui/assets/20250816183935-BEJK9ZUR.png",x="/asuswrt-merlin-xrayui/assets/20250816184000-Dcz9DXlh.png",m={},_={class:"table-of-contents"};function R(X,a){const n=d("router-link");return p(),l("div",null,[a[27]||(a[27]=i('<h1 id="руководство-по-общим-настроикам" tabindex="-1"><a class="header-anchor" href="#руководство-по-общим-настроикам"><span>Руководство по общим настройкам</span></a></h1><p>Модальное окно <strong>Общие настройки</strong> централизует управление поведением XRAYUI на роутере ASUSWRT-Merlin: порядок запуска, работу DNS, источники геоданных, логи и управление подписками.</p><p>Открыть: нажмите <strong>General Options</strong> в разделе <strong>Configuration</strong>.<br> Сохранение: нажмите <strong>Save</strong> внизу диалога.</p>',3)),s("nav",_,[s("ul",null,[s("li",null,[e(n,{to:"#обзор-вкладок"},{default:t(()=>a[0]||(a[0]=[r("Обзор вкладок",-1)])),_:1,__:[0]})]),s("li",null,[e(n,{to:"#general"},{default:t(()=>a[1]||(a[1]=[r("General",-1)])),_:1,__:[1]}),s("ul",null,[s("li",null,[e(n,{to:"#отображать-debug-логи"},{default:t(()=>a[2]||(a[2]=[r("Отображать debug логи",-1)])),_:1,__:[2]})]),s("li",null,[e(n,{to:"#запуск-xray-при-перезагрузке-роутера"},{default:t(()=>a[3]||(a[3]=[r("Запуск XRAY при перезагрузке роутера",-1)])),_:1,__:[3]})]),s("li",null,[e(n,{to:"#проверить-соединение-с-сервером-xray"},{default:t(()=>a[4]||(a[4]=[r("Проверить соединение с сервером XRAY",-1)])),_:1,__:[4]})]),s("li",null,[e(n,{to:"#использовать-прокси-github"},{default:t(()=>a[5]||(a[5]=[r("Использовать прокси GitHub",-1)])),_:1,__:[5]})]),s("li",null,[e(n,{to:"#пропустить-проверку-xray"},{default:t(()=>a[6]||(a[6]=[r("Пропустить проверку XRAY",-1)])),_:1,__:[6]})]),s("li",null,[e(n,{to:"#проверка-статуса-клиентов-онлаин"},{default:t(()=>a[7]||(a[7]=[r("Проверка статуса клиентов онлайн",-1)])),_:1,__:[7]})])])]),s("li",null,[e(n,{to:"#dns"},{default:t(()=>a[8]||(a[8]=[r("DNS",-1)])),_:1,__:[8]}),s("ul",null,[s("li",null,[e(n,{to:"#включить-dns-обход-ipset"},{default:t(()=>a[9]||(a[9]=[r("Включить DNS-обход (ipset)",-1)])),_:1,__:[9]})]),s("li",null,[e(n,{to:"#предотвратить-утечки-dns"},{default:t(()=>a[10]||(a[10]=[r("Предотвратить утечки DNS",-1)])),_:1,__:[10]})])])]),s("li",null,[e(n,{to:"#geodata"},{default:t(()=>a[11]||(a[11]=[r("Geodata",-1)])),_:1,__:[11]}),s("ul",null,[s("li",null,[e(n,{to:"#geoip-url"},{default:t(()=>a[12]||(a[12]=[r("GeoIP URL",-1)])),_:1,__:[12]})]),s("li",null,[e(n,{to:"#geosite-url"},{default:t(()=>a[13]||(a[13]=[r("GeoSite URL",-1)])),_:1,__:[13]})]),s("li",null,[e(n,{to:"#автообновление-фаилов-геоданных"},{default:t(()=>a[14]||(a[14]=[r("Автообновление файлов геоданных",-1)])),_:1,__:[14]})])])]),s("li",null,[e(n,{to:"#тригеры"},{default:t(()=>a[15]||(a[15]=[r("Тригеры",-1)])),_:1,__:[15]})]),s("li",null,[e(n,{to:"#logs"},{default:t(()=>a[16]||(a[16]=[r("Logs",-1)])),_:1,__:[16]}),s("ul",null,[s("li",null,[e(n,{to:"#включить-логи-dnsmasq"},{default:t(()=>a[17]||(a[17]=[r("Включить логи dnsmasq",-1)])),_:1,__:[17]})]),s("li",null,[e(n,{to:"#включить-логи-доступа"},{default:t(()=>a[18]||(a[18]=[r("Включить логи доступа",-1)])),_:1,__:[18]})]),s("li",null,[e(n,{to:"#включить-логи-ошибок"},{default:t(()=>a[19]||(a[19]=[r("Включить логи ошибок",-1)])),_:1,__:[19]})]),s("li",null,[e(n,{to:"#уровень-логирования"},{default:t(()=>a[20]||(a[20]=[r("Уровень логирования",-1)])),_:1,__:[20]})]),s("li",null,[e(n,{to:"#включить-логи-dns"},{default:t(()=>a[21]||(a[21]=[r("Включить логи DNS",-1)])),_:1,__:[21]})]),s("li",null,[e(n,{to:"#максимальныи-размер-лога"},{default:t(()=>a[22]||(a[22]=[r("Максимальный размер лога",-1)])),_:1,__:[22]})]),s("li",null,[e(n,{to:"#очищать-логи-при-перезапуске-xray"},{default:t(()=>a[23]||(a[23]=[r("Очищать логи при перезапуске Xray",-1)])),_:1,__:[23]})]),s("li",null,[e(n,{to:"#интеграция-логов-xrayui-с-scribe"},{default:t(()=>a[24]||(a[24]=[r("Интеграция логов XRAYUI с Scribe",-1)])),_:1,__:[24]})])])]),s("li",null,[e(n,{to:"#subscriptions"},{default:t(()=>a[25]||(a[25]=[r("Subscriptions",-1)])),_:1,__:[25]}),s("ul",null,[s("li",null,[e(n,{to:"#источники-подписок"},{default:t(()=>a[26]||(a[26]=[r("Источники подписок",-1)])),_:1,__:[26]})])])])])]),a[28]||(a[28]=i('<h2 id="обзор-вкладок" tabindex="-1"><a class="header-anchor" href="#обзор-вкладок"><span>Обзор вкладок</span></a></h2><ul><li><strong>General</strong> — служебные переключатели и последовательность запуска</li><li><strong>DNS</strong> — режим обхода/перенаправления через ipset и защита от утечек DNS</li><li><strong>Geodata</strong> — выбор и авто-обновление баз GeoIP/GeoSite</li><li><strong>Hooks</strong> — выполнение пользовательских скриптов до/после изменений в фаерволе</li><li><strong>Logs</strong> — типы логов, уровни, размеры и интеграции</li><li><strong>Subscriptions</strong> — ввод ссылок на подписки и загрузка доступных прокси</li></ul><h2 id="general" tabindex="-1"><a class="header-anchor" href="#general"><span>General</span></a></h2><p><img src="'+u+'" alt="general"></p><h3 id="отображать-debug-логи" tabindex="-1"><a class="header-anchor" href="#отображать-debug-логи"><span>Отображать debug логи</span></a></h3><p>Включает подробные (debug) логи XRAYUI. Полезно для диагностики. На стабильных конфигурациях рекомендуется отключать, чтобы уменьшить объём и «шум» логов.</p><div class="hint-container tip"><p class="hint-container-title">xray logs</p><p>Не путайте с логами <strong>Xray</strong> (логи приложения), которые настраиваются во вкладке <strong>Logs</strong>.</p></div><h3 id="запуск-xray-при-перезагрузке-роутера" tabindex="-1"><a class="header-anchor" href="#запуск-xray-при-перезагрузке-роутера"><span>Запуск XRAY при перезагрузке роутера</span></a></h3><p>При включении XRAYUI стартует XRAY во время загрузки системы.</p><div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Если вы экспериментируете с настройками, рекомендуется временно отключить этот пункт. Некорректная конфигурация может вызвать «бут-луп», если XRAY перезапускается при каждом старте.</p></div><h4 id="задержка-после-перезагрузки-роутера" tabindex="-1"><a class="header-anchor" href="#задержка-после-перезагрузки-роутера"><span>Задержка после перезагрузки роутера</span></a></h4><p>Время ожидания (в секундах) после загрузки, прежде чем запускать XRAY. Используйте, если WAN, USB/JFFS или другие службы требуют времени на инициализацию. Типичные значения для медленных устройств: 5–20 секунд. Допустимо <code>0</code>.</p><h4 id="задержка-после-запуска-xray" tabindex="-1"><a class="header-anchor" href="#задержка-после-запуска-xray"><span>Задержка после запуска XRAY</span></a></h4><p>Дополнительная пауза (в секундах) после старта XRAY, прежде чем XRAYUI продолжит последующие шаги (например, применение правил фаервола). По умолчанию <strong>10</strong> секунд. Допустимо <code>0</code>.</p><div class="hint-container tip"><p class="hint-container-title">Почему это нужно?</p><p>Запуск XRAY и применение правил XRAYUI — ресурсоёмкие операции. На некоторых роутерах их разведение по времени предотвращает пиковые нагрузки и подвисания.</p></div><h3 id="проверить-соединение-с-сервером-xray" tabindex="-1"><a class="header-anchor" href="#проверить-соединение-с-сервером-xray"><span>Проверить соединение с сервером XRAY</span></a></h3><p>Проверяет доступность исходящих соединений при запуске. XRAYUI временно добавляет системное правило в таблицу маршрутизации и поднимает краткоживущий SOCKS-вход (помечен тегом <code>sys</code> и скрыт в UI), затем выполняет пробу через <code>ip-api.com</code>. В интерфейсе отображается статус для каждого outbound.</p><h3 id="использовать-прокси-github" tabindex="-1"><a class="header-anchor" href="#использовать-прокси-github"><span>Использовать прокси GitHub</span></a></h3><p>Выберите прокси-базу для загрузок с GitHub (обновления XRAY, геоданные и т. п.). Оставьте пустым для прямой загрузки. Полезно, когда GitHub заблокирован или ограничен по скорости (например, в материковом Китае).</p><h3 id="пропустить-проверку-xray" tabindex="-1"><a class="header-anchor" href="#пропустить-проверку-xray"><span>Пропустить проверку XRAY</span></a></h3><p>Пропускает шаг валидации конфигурации (<code>xray -test</code>) перед запуском XRAY. Ускоряет старт, но не рекомендуется, если вы не уверены в корректности настроек.</p><div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Отключение проверки лишает XRAYUI возможности показать ошибки конфигурации <strong>до</strong> запуска.</p></div><h3 id="проверка-статуса-клиентов-онлаин" tabindex="-1"><a class="header-anchor" href="#проверка-статуса-клиентов-онлаин"><span>Проверка статуса клиентов онлайн</span></a></h3><p>Если XRAY используется как сервер (клиенты подключаются через приложения Xray), XRAYUI может периодически проверять, какие клиенты «в сети». Повышает наглядность ценой небольших накладных расходов.</p><h2 id="dns" tabindex="-1"><a class="header-anchor" href="#dns"><span>DNS</span></a></h2><p><img src="'+h+'" alt="dns"></p><h3 id="включить-dns-обход-ipset" tabindex="-1"><a class="header-anchor" href="#включить-dns-обход-ipset"><span>Включить DNS-обход (ipset)</span></a></h3><p>Определяет, как решения по доменам дублируются в ядро через ipset для быстрого роутинга:</p><ul><li><strong>OFF</strong> — <code>ipset</code> отключён; маршрутизация работает так, будто опции нет.</li><li><strong>BYPASS</strong> — домены, направленные в outbound <code>FREEDOM</code>, уходят напрямую в интернет; остальное идёт через прокси.</li><li><strong>REDIRECT</strong> — наоборот: проксируется только то, что <strong>не</strong> сопоставлено с <code>FREEDOM</code>; остальной трафик уходит напрямую.</li></ul><div class="hint-container note"><p class="hint-container-title">Заметка</p><p>Домены по регулярным выражениям (записи с префиксом <code>regexp:</code>) нельзя добавить в ipset, поэтому эта функция их игнорирует. Внутри движка Xray такие правила продолжают работать.</p></div><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>В режиме <code>REDIRECT</code> явные правила, перенаправляющие домены в <code>FREEDOM</code>, становятся избыточными и могут быть удалены.</p></div><h3 id="предотвратить-утечки-dns" tabindex="-1"><a class="header-anchor" href="#предотвратить-утечки-dns"><span>Предотвратить утечки DNS</span></a></h3><p>Отправляет DNS-запросы по пути XRAY, предотвращая утечки. Не включайте без корректной DNS-конфигурации в Xray. Подробнее — на странице <a href="dns-leak">об утечках DNS</a>.</p><h2 id="geodata" tabindex="-1"><a class="header-anchor" href="#geodata"><span>Geodata</span></a></h2><p><img src="'+g+'" alt="geodata"></p><h3 id="geoip-url" tabindex="-1"><a class="header-anchor" href="#geoip-url"><span>GeoIP URL</span></a></h3><p>Прямая ссылка на <code>geoip.dat</code>.</p><h3 id="geosite-url" tabindex="-1"><a class="header-anchor" href="#geosite-url"><span>GeoSite URL</span></a></h3><p>Прямая ссылка на <code>geosite.dat</code>.</p><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>Используйте выпадающий список <strong>Использовать общедоступные геоданные</strong>, чтобы быстро подставить обе ссылки из доверенного источника.</p></div><p>В список обычно входят:</p><ul><li>Loyalsoldier (<code>v2ray-rules-dat</code>)</li><li>RUNET Freedom (<code>russia-v2ray-rules-dat</code>)</li><li>Nidelon (<code>ru-block-v2ray-rules</code>)</li><li>DustinWin (<code>ruleset_geodata</code>)</li><li>Chocolate4U (<code>Iran-v2ray-rules</code>)</li></ul><h3 id="автообновление-фаилов-геоданных" tabindex="-1"><a class="header-anchor" href="#автообновление-фаилов-геоданных"><span>Автообновление файлов геоданных</span></a></h3><p>Периодически обновляет файлы геоданных в фоновом режиме. Также модуль будет перекомпилировать <a href="custom-geodata#%D0%BE%D0%B1%D0%B7%D0%BE%D1%80-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B8%D1%81%D0%B0">ваш кастомный файл geodat</a>. Это удобная опция, в случае если вы используете внешние ссылки на домены в файле.</p><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Создаётся cron-задача, которая скачивает свежие файлы ежедневно в <strong>03:00</strong>.</p></div><h2 id="тригеры" tabindex="-1"><a class="header-anchor" href="#тригеры"><span>Тригеры</span></a></h2><p><img src="'+c+'" alt="тригеры"></p><p>XRAYUI может выполнять короткие shell-фрагменты в определённых точках жизненного цикла фаервола. Не добавляйте shebang (<code>#!/bin/sh</code>): он будет добавлен автоматически.</p><ul><li><strong>Перед запуском брандмауэра</strong> — выполняется сразу перед применением правил XRAYUI.</li><li><strong>После запуска брандмауэра</strong> — сразу после применения правил.</li><li><strong>После очистки брандмауэра</strong> — после удаления правил XRAYUI при остановке/перезапуске.</li></ul><p>Держите скрипты короткими и идемпотентными. Используйте для точечных правок фаервола, не покрытых настройками UI.</p><h2 id="logs" tabindex="-1"><a class="header-anchor" href="#logs"><span>Logs</span></a></h2><p><img src="'+f+'" alt="логи"></p><p>Эти параметры управляют тем, как XRAYUI отображает логи <strong>Xray</strong>. При включении внизу главной страницы появляется раздел <strong>Logs</strong>.</p><p><img src="'+b+'" alt="выбор логов"></p><h3 id="включить-логи-dnsmasq" tabindex="-1"><a class="header-anchor" href="#включить-логи-dnsmasq"><span>Включить логи dnsmasq</span></a></h3><p>Показывает доменные имена (а не только IP) в логах, отображаемых XRAYUI.</p><h3 id="включить-логи-доступа" tabindex="-1"><a class="header-anchor" href="#включить-логи-доступа"><span>Включить логи доступа</span></a></h3><p>Включает access-логирование Xray.</p><h3 id="включить-логи-ошибок" tabindex="-1"><a class="header-anchor" href="#включить-логи-ошибок"><span>Включить логи ошибок</span></a></h3><p>Включает error-логирование Xray.</p><h3 id="уровень-логирования" tabindex="-1"><a class="header-anchor" href="#уровень-логирования"><span>Уровень логирования</span></a></h3><p>Задаёт подробность логов ошибок. Значение <code>none</code> также отключает access-логи.</p><p>Рекомендации:</p><ul><li><code>warning</code> или <code>error</code> — для обычной работы</li><li><code>info</code> или <code>debug</code> — для диагностики</li></ul><h3 id="включить-логи-dns" tabindex="-1"><a class="header-anchor" href="#включить-логи-dns"><span>Включить логи DNS</span></a></h3><p>Включает журналирование DNS-запросов компонентом DNS в Xray. Полезно при отладке правил. На загруженных сетях логов станет больше.</p><h3 id="максимальныи-размер-лога" tabindex="-1"><a class="header-anchor" href="#максимальныи-размер-лога"><span>Максимальный размер лога</span></a></h3><p>Порог (в МБ), при превышении которого включается автоматическая ротация.</p><h3 id="очищать-логи-при-перезапуске-xray" tabindex="-1"><a class="header-anchor" href="#очищать-логи-при-перезапуске-xray"><span>Очищать логи при перезапуске Xray</span></a></h3><p>Очищает логи при перезапуске Xray.</p><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Создаётся cron-задача для запуска <code>logrotate</code> каждые <strong>15 минут</strong>.</p></div><h3 id="интеграция-логов-xrayui-с-scribe" tabindex="-1"><a class="header-anchor" href="#интеграция-логов-xrayui-с-scribe"><span>Интеграция логов XRAYUI с Scribe</span></a></h3><p>Если доступно в системе, отправляет логи XRAYUI в <a href="https://github.com/AMTM-OSR/scribe" target="_blank" rel="noopener noreferrer">Scribe</a> для просмотра в его веб-интерфейсе.</p><h2 id="subscriptions" tabindex="-1"><a class="header-anchor" href="#subscriptions"><span>Subscriptions</span></a></h2><p>Эта вкладка отвечает за источники подписок. Отдельное руководство: <a href="subscriptions">Подписки</a>.</p><h3 id="источники-подписок" tabindex="-1"><a class="header-anchor" href="#источники-подписок"><span>Источники подписок</span></a></h3><p><img src="'+x+'" alt="подписки"></p><p>Вставьте одну или несколько ссылок (по одной в строке).<br> Нажмите <strong>получить</strong>, чтобы загрузить и разобрать источники.<br> После загрузки сможете выбирать подписочные конфигурации при настройке outbound.</p>',78))])}const y=o(m,[["render",R]]),A=JSON.parse('{"path":"/ru/general-options.html","title":"Руководство по общим настройкам","lang":"ru-RU","frontmatter":{},"git":{"updatedTime":1757346344000,"contributors":[{"name":"Daniel Lavrushin","username":"","email":"lavrushin@gmail.com","commits":2}],"changelog":[{"hash":"d4c3147d892288aa13403d5852ec8b65224d8304","time":1757346344000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"fix: Refactor geodata update process and add URL fetching functionality"},{"hash":"62390969d4ef2511bf75a2b7b27630f8014b8303","time":1755366072000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Add comprehensive documentation for XRAYUI features and configurations"}]},"filePathRelative":"ru/general-options.md"}');export{y as comp,A as data};
