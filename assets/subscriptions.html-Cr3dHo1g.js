import{_ as e,a as s,b as n,c as o,d as t}from"./20250731213630-CqsoXd20.js";import{_ as r,c as i,a as c,o as p}from"./app-BsG86pRf.js";const l="/asuswrt-merlin-xrayui/assets/20260220235835-Dz3-p9Xx.png",d="/asuswrt-merlin-xrayui/assets/20260220235930-B4LrNLek.png",h="/asuswrt-merlin-xrayui/assets/20260222194318-1DmTebNF.png",u="/asuswrt-merlin-xrayui/assets/20260222194230--Qwqihz5.png",g={};function m(b,a){return p(),i("div",null,[...a[0]||(a[0]=[c(`<h1 id="руководство-по-подпискам" tabindex="-1"><a class="header-anchor" href="#руководство-по-подпискам"><span>Руководство по подпискам</span></a></h1><p>Подписка в мире XRAY — удобный способ упростить обслуживание конфигурации между сервером и клиентом. После завершения настройки вашего сервера XRAY он может предоставить URL подписки, который может использовать любой клиент, совместимый с XRAY. Подписки не являются встроенной функцией самого XRAY Core — многие сторонние серверные панели и интерфейсы добавляют этот слой удобства.</p><p>Все больше проектов умеют генерировать URL подписки для вашего сервера. Загляните на <a href="https://github.com/XTLS/Xray-core" target="_blank" rel="noopener noreferrer">домашнюю страницу XRAY Core</a>, чтобы найти поддерживаемые инструменты и клиенты.</p><h2 id="подписки-«под-капотом»" tabindex="-1"><a class="header-anchor" href="#подписки-«под-капотом»"><span>Подписки «под капотом»</span></a></h2><p>Есть два варианта URL подписок:</p><ul><li><p><strong>Ссылка протокола подписки (токен)</strong>: начинается с префикса протокола прокси, такого как <code>ss://</code>, <code>vless://</code>, <code>vmess://</code> и т. д. Может быть закодирована в Base64, поэтому содержимое не читается напрямую.</p></li><li><p><strong>Источник подписки</strong>: список нескольких конфигураций прокси (каждая на своей строке, закодированы).</p><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Единственная по-настоящему важная разница — гранулярность: ссылка протокола отдаёт <code>один</code> прокси, источник — <code>много</code>.</p></div><div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Открытие любой из ссылок в браузере может показать &quot;абракадабру&quot; — это просто Base64. XRAYUI декодирует всё за вас. Если любопытно — не обязательно! — можете декодировать сами на <a href="https://www.base64decode.org/" target="_blank" rel="noopener noreferrer">base64decode.org</a>.</p></div><div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Разбор может быть непростым. Если что-то ведёт себя странно, загляните в наш <a href="https://t.me/asusxray" target="_blank" rel="noopener noreferrer">Telegram-группу</a> — поможем.</p></div></li></ul><h3 id="ссылка-протокола-подписки" tabindex="-1"><a class="header-anchor" href="#ссылка-протокола-подписки"><span>Ссылка протокола подписки</span></a></h3><p>Одиночная ссылка на прокси — возможно, из <code>3x-u</code>, <code>Marzban</code> или любого другого <a href="https://github.com/XTLS/Xray-core" target="_blank" rel="noopener noreferrer">провайдера</a>. Пример декодированного содержимого может выглядеть так:</p><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">vless://05519058-d2ac-4f28-9e4a-2b2a1386749e@1.1.1.1:22222?path=/telegram-channel-vlessconfig-ws&amp;security=tls&amp;encryption=none&amp;host=somedomainname.com&amp;type=ws&amp;sni=telegram-channel-vlessconfig.sohala.uk#Telegram @VlessConfig</span>
<span class="line"></span></code></pre></div><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Содержимое ссылки при открытии в браузере может быть закодировано, и вы не поймёте его сразу. Это нормально — просто предоставьте ссылку.</p></div><h3 id="ссылка-источник-подписки" tabindex="-1"><a class="header-anchor" href="#ссылка-источник-подписки"><span>Ссылка-источник подписки</span></a></h3><p>Ссылка-источник подписки. Источник подписки — это ссылка, содержащая больше одного протокола. По сути это просто список протоколов (много строк со случайными <code>ss://</code>, <code>vless://</code> и т. п.).</p><h2 id="xrayui-ссылка-протокола" tabindex="-1"><a class="header-anchor" href="#xrayui-ссылка-протокола"><span>XRAYUI: Ссылка протокола</span></a></h2><p>Начнём со ссылки протокола (надеемся, вы не пропустили важную предыдущую часть, верно?).</p><p>XRAYUI ожидает, что вы знаете протокол ссылки. Поэтому сначала нужно создать элемент outbound соответствующего протокола.</p><p>В разделе Outbounds выберите нужный протокол в выпадающем списке и создайте его. Например, у вас есть ссылка</p><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">https://yourserver:2096/asd7696asf98df/d0f97sd00df7s09s8df</span>
<span class="line"></span></code></pre></div><p>Вставьте её в поле <code>URL подписки</code><img src="`+e+'" alt="subscriptions protocol"> Все зависящие от подписки поля становятся неактивными. Это означает, что эти поля и параметры будут управляться вашей подпиской.</p><p>Нажмите <code>сохранить</code>, чтобы сохранить изменения.</p><div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Помните: это не применяет изменения конфигурации. Всё равно нужно нажать <code>применить</code> в основной форме, чтобы изменения были отправлены на бэкенд и сохранены.</p></div><p>Когда вы примените изменения основной формы, правки вступят в силу, и страница перезагрузится. Рядом с вашим outbound появится значок ссылки, указывающий, что этот outbound управляется ссылкой подписки. <img src="'+s+'" alt="proxy subscription line"></p><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Несмотря на слово «подписка» в названии, недостаточно просто обновить удалённую сторону. Чтобы изменения вступили в силу, каждый раз после изменения вашей подписки нажимайте кнопку <code>применить</code> в XRAYUI. В этом случае XRAYUI перезагрузит и применит обновлённые параметры.</p></div><h2 id="xrayui-ссылка-источник" tabindex="-1"><a class="header-anchor" href="#xrayui-ссылка-источник"><span>XRAYUI: Ссылка-источник</span></a></h2><p>Ссылка-источник — это ссылка, содержащая более одного протокола. Она не будет работать как ссылка протокола, описанная выше, — настройка выполняется иначе.</p><p>Перейдите в <code>Общие настройки</code> в разделе конфигурации и переключитесь на вкладку <code>Подписки</code>. <img src="'+n+'" alt="source link"> Можно сохранить — окно будет перезагружено. Или укажите временную ссылку и нажмите кнопку <code>Получить</code> под текстовой областью.</p><p><img src="'+o+'" alt="fetch"></p><p>Система получит ссылки из источника подписки. Визуально ничего не произошло — это нормально. Можно закрыть окно.</p><p>Однако если вы создадите новый исходящий прокси (outbound), вы получите список доступных подписок, из которого можно выбрать в списке <code>Доступная конфигурация подписки</code><img src="'+t+'" alt="available subscriptions"></p><div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Выпадающий список доступен только если из URL был получен соответствующий тип подписки.</p></div><p>Теперь вы можете выбрать объект подписки в выпадающем списке, и параметры конфигурации применятся автоматически.</p><div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Разница между источником подписки и ссылкой протокола — в гранулярности. Если ссылка содержит один элемент — вставьте её в поле URL подписки, и при перезапуске службы произойдёт автоматическая перезагрузка. Если же она содержит больше одного источника, для каждого outbound будет отображаться выпадающий список. Это потребует повторного применения настроек при изменениях на удалённой стороне.</p></div><h2 id="автоматическое-обновление-подписок" tabindex="-1"><a class="header-anchor" href="#автоматическое-обновление-подписок"><span>Автоматическое обновление подписок</span></a></h2><p>По умолчанию источники подписок загружаются только при ручном нажатии кнопки <code>Получить</code>. Если ваш провайдер подписок часто обновляет эндпоинты серверов, можно включить автоматическое обновление, чтобы список серверов всегда оставался актуальным.</p><p><img src="'+l+'" alt="autosubru"></p><p>В <code>Общие настройки</code> → вкладка <code>Подписки</code> найдите настройку <strong>Автообновление подписок</strong> и выберите расписание:</p><ul><li><strong>Отключено</strong> — только ручное обновление (по умолчанию)</li><li><strong>Каждые 3 часа</strong> — обновление каждые 3 часа</li><li><strong>Каждые 6 часов</strong> — каждые 6 часов</li><li><strong>Каждые 12 часов</strong> — каждые 12 часов</li></ul><p>Обновление выполняется в фоновом режиме через cron-задачу. Используются те же ссылки подписок, которые вы уже настроили в текстовом поле выше.</p><h2 id="автоматическое-переключение-auto-fallback" tabindex="-1"><a class="header-anchor" href="#автоматическое-переключение-auto-fallback"><span>Автоматическое переключение (Auto-Fallback)</span></a></h2><p>Автоматическое переключение предназначено для ситуаций, когда ваш провайдер или сеть блокирует прокси-эндпоинт. При включении XRAYUI будет периодически проверять, доступен ли ваш активный прокси. Если будет обнаружено, что эндпоинт недоступен, система автоматически переключится на следующий рабочий сервер из пула подписки. Правила маршрутизации, DNS-настройки и всё остальное останутся нетронутыми — изменятся только параметры подключения.</p><h3 id="как-включить" tabindex="-1"><a class="header-anchor" href="#как-включить"><span>Как включить</span></a></h3><p>Настройка состоит из двух частей:</p><p><strong>1. Глобальный переключатель</strong> — В <code>Общие настройки</code> → вкладка <code>Подписки</code>:</p><ul><li>Включите чекбокс <strong>Авто-переключение</strong>. Это активирует систему мониторинга состояния.</li><li>Выберите <strong>Интервал проверки</strong> (2, 5 или 10 минут). Это определяет, как часто система проверяет доступность ваших эндпоинтов.</li></ul><div class="hint-container important"><p class="hint-container-title">Важно</p><p>Для работы автоматического переключения необходимо включить функцию <strong>Проверка соединений Xray</strong> в <code>Общие настройки</code> → вкладка <code>Общие</code>. Эта функция позволяет Xray отслеживать доступность ваших эндпоинтов. Если она отключена, в настройках авто-переключения будет отображено сообщение с пояснением.</p></div><p><strong>2. Включение для каждого outbound</strong> — В настройках каждого outbound:</p><ul><li>Сначала выберите эндпоинт из выпадающего списка <code>Доступная конфигурация подписки</code> (для этого необходимо предварительно загрузить источники подписок).</li><li>Затем включите чекбокс <strong>Пул авто-переключения</strong>. Это привязывает outbound к пулу подписки для автоматического восстановления.</li></ul><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Только outbound-ы с включённым чекбоксом <strong>Пул авто-переключения</strong> участвуют в автоматическом переключении. Остальные outbound-ы остаются без изменений.</p></div><p><img src="'+d+'" alt="subautooutboundru"></p><h3 id="url-проверки-probe-url" tabindex="-1"><a class="header-anchor" href="#url-проверки-probe-url"><span>URL проверки (Probe URL)</span></a></h3><p>По умолчанию проверка соединений выполняется путём отправки запроса на <code>https://www.google.com/generate_204</code>. Если этот URL не подходит для вашего окружения (например, если он заблокирован в вашем регионе), его можно изменить в <code>Общие настройки</code> → вкладка <code>Подписки</code> в поле <strong>URL проверки</strong>.</p><p><img src="'+h+'" alt="propurl"></p><p>URL проверки должен возвращать HTTP-ответ <code>204 No Content</code>, чтобы считаться успешным. Подойдёт любой эндпоинт, возвращающий 204.</p><h3 id="фильтры-ротации" tabindex="-1"><a class="header-anchor" href="#фильтры-ротации"><span>Фильтры ротации</span></a></h3><p>Если ваш пул подписки содержит серверы во многих регионах, но вы хотите переключаться только между определённой подгруппой, можно задать <strong>Фильтры ротации</strong> в <code>Общие настройки</code> → вкладка <code>Подписки</code>.</p><p><img src="'+u+'" alt="subfilters"></p><p>Введите ключевые слова через запятую (например, <code>Canada, Denmark</code>). При автоматическом переключении на новый сервер будут рассматриваться только ссылки подписки, в названии или URL которых содержится хотя бы одно из указанных ключевых слов. Ссылки, не соответствующие ни одному ключевому слову, пропускаются.</p><p>Если фильтры не заданы или ни одно ключевое слово не совпадает с ссылками в пуле, используется весь пул подписки, как и прежде.</p><h3 id="как-это-работает" tabindex="-1"><a class="header-anchor" href="#как-это-работает"><span>Как это работает</span></a></h3><p>Система проверяет outbound-ы с включённым пулом по настроенному расписанию. Для каждого из них:</p><ol><li>Проверяется доступность эндпоинта с помощью функции <strong>Проверка соединений</strong>. Xray непрерывно зондирует настроенные эндпоинты и предоставляет надёжные и актуальные данные о состоянии.</li><li>При одиночном сбое переключение не происходит. Система ждёт <strong>3 последовательных неудачи</strong>, чтобы не реагировать на временные сетевые проблемы.</li><li>После 3 неудач система переключается на следующий сервер в пуле подписки (с учётом фильтров ротации, если они заданы). Проверка соединений подтвердит доступность нового сервера в следующем цикле.</li><li>Переключение выполняется мгновенно через <strong>Xray API</strong> практически без простоя. Если API недоступен, система автоматически переключается на полный перезапуск Xray.</li></ol><div class="hint-container info"><p class="hint-container-title">Инфо</p><p>Настройки пула подписки сохраняются при перезапуске Xray. Повторная настройка пула после перезапуска сервиса не требуется.</p></div><p>Встроенное ограничение безопасности предотвращает чрезмерное переключение — не более 5 переключений в час на один outbound. Если все эндпоинты в пуле недоступны, система очищает список неудачных и повторяет попытку в следующем цикле.</p>',62)])])}const x=r(g,[["render",m]]),_=JSON.parse('{"path":"/ru/subscriptions.html","title":"Руководство по подпискам","lang":"ru-RU","frontmatter":{},"git":{"updatedTime":1771786039000,"contributors":[{"name":"Daniel Lavrushin","username":"","email":"lavrushin@gmail.com","commits":3}],"changelog":[{"hash":"5a18adf713c91174590905f3316a07e9d42b3e2b","time":1771786039000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Refactor code structure for improved readability and maintainability"},{"hash":"7e629facadbecbbcb75d4bd9f4bea1fa6e4ecedc","time":1771628416000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Implement failover mechanism in failover.sh for managing outbound connections"},{"hash":"62390969d4ef2511bf75a2b7b27630f8014b8303","time":1755366072000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Add comprehensive documentation for XRAYUI features and configurations"}]},"filePathRelative":"ru/subscriptions.md"}');export{x as comp,_ as data};
