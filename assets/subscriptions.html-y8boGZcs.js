import{_ as o,a as t,b as n,c as i,d as s}from"./20250731213630-CqsoXd20.js";import{_ as a,c as r,a as c,o as l}from"./app-BsG86pRf.js";const p="/asuswrt-merlin-xrayui/assets/20260222194646-CINRWSc8.png",h="/asuswrt-merlin-xrayui/assets/20260220235709-DTotSWUB.png",d="/asuswrt-merlin-xrayui/assets/20260222194527-hHyhiR0Z.png",u={};function b(f,e){return l(),r("div",null,[...e[0]||(e[0]=[c(`<h1 id="guide-to-subscriptions" tabindex="-1"><a class="header-anchor" href="#guide-to-subscriptions"><span>Guide to Subscriptions</span></a></h1><p>Subscription in the XRAY world is a handy way to simplify the maintenance of configuration between server and client. Once your XRAY server setup is complete, it can expose a subscription URL that any XRAY-compatible client can consume. Subscriptions are not a built-in feature of XRAY Core itself—many third-party server-side dashboards and UIs add this convenience layer.</p><p>A growing number of projects can generate subscription URLs for your server. Check the <a href="https://github.com/XTLS/Xray-core" target="_blank" rel="noopener noreferrer">XRAY Core home page</a> to find supported tools and clients.</p><h2 id="subscriptions-under-the-hood" tabindex="-1"><a class="header-anchor" href="#subscriptions-under-the-hood"><span>Subscriptions under the Hood</span></a></h2><p>There are two flavors of subscription URLs:</p><ul><li><p><strong>Subscription protocol link (a token)</strong>: Starts with a proxy protocol prefix such as <code>ss://</code>, <code>vless://</code>, <code>vmess://</code>, etc. This could be encoded to base64, so you cannot read it.</p></li><li><p><strong>Subscription source</strong>: A list of multiple proxy configurations (each on its own line, encoded).</p><div class="hint-container info"><p class="hint-container-title">Info</p><p>The only real difference is granularity: a protocol link delivers <code>one</code> proxy, while a source link delivers <code>many</code>.</p></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Opening either link in your browser may show “gibberish”—that’s just Base64. XRAYUI will decode it for you. If you’re curious — not required! — you can decode it yourself at <a href="https://www.base64decode.org/" target="_blank" rel="noopener noreferrer">base64decode.org</a>.</p></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Parsing can get tricky. If something misbehaves, swing by our <a href="https://t.me/asusxray" target="_blank" rel="noopener noreferrer">Telegram group</a> and we’ll lend a hand.</p></div></li></ul><h3 id="subscription-protocol-link" tabindex="-1"><a class="header-anchor" href="#subscription-protocol-link"><span>Subscription Protocol Link</span></a></h3><p>A single-proxy link—maybe from <code>3x-u</code>, <code>Marzban</code>, or any other <a href="https://github.com/XTLS/Xray-core" target="_blank" rel="noopener noreferrer">provider</a>. A decoded example might look like this:</p><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">vless://05519058-d2ac-4f28-9e4a-2b2a1386749e@1.1.1.1:22222?path=/telegram-channel-vlessconfig-ws&amp;security=tls&amp;encryption=none&amp;host=somedomainname.com&amp;type=ws&amp;sni=telegram-channel-vlessconfig.sohala.uk#Telegram @VlessConfig</span>
<span class="line"></span></code></pre></div><div class="hint-container info"><p class="hint-container-title">Info</p><p>The link content when opening it in the browser can be encoded, so you don&#39;t understand it. This is fine, just try to provide it.</p></div><h3 id="subscription-source-link" tabindex="-1"><a class="header-anchor" href="#subscription-source-link"><span>Subscription Source Link</span></a></h3><p>A subscription source link. Subscription source is a link that contains more than one protocol inside. Basically, it is just a list of protocols (many lines randomly containing <code>ss://</code>, <code>vless://</code>, etc.).</p><h2 id="xrayui-protocol-link" tabindex="-1"><a class="header-anchor" href="#xrayui-protocol-link"><span>XRAYUI: Protocol Link</span></a></h2><p>Let us start with a protocol link (hopefully you did not skip the important previous part, did you?).</p><p>XRAYUI is expecting you to know the protocol of the link. So first things first - we need to create an outbound protocol item first.</p><p>In the Outbounds section, select a desired protocol from the drop-down and create it. For example, you have a link</p><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">https://yourserver:2096/asd7696asf98df/d0f97sd00df7s09s8df</span>
<span class="line"></span></code></pre></div><p>Insert it to the field <code>Subscription URL</code><br><img src="`+o+'" alt="subscriptions protocol"><br> All dependent on the subscription field becomes inactive. It means these fields and settings will be controlled by your subscription.</p><p>Press <code>save</code> to save the changes.</p><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Remember: this will not apply the config changes. You still will need to press <code>apply</code> in the main form so the changes you made will be sent to the backend and saved.</p></div><p>When you apply main form changes, your changes will be applied and the page will be reloaded. You will notice a link icon next to your outbound indicating this outbound is controlled by the subscription link.<br><img src="'+t+'" alt="proxy subscription line"></p><div class="hint-container info"><p class="hint-container-title">Info</p><p>Even though the name means subscription, it is not enough just to update the remote side. To ensure the changes are taken into action, you need to press the <code>apply</code> button in the XRAYUI every time you change something in your subscription. In this case, the modified changes will be reloaded and applied by XRAYUI.</p></div><h2 id="xrayui-source-link" tabindex="-1"><a class="header-anchor" href="#xrayui-source-link"><span>XRAYUI: Source Link</span></a></h2><p>Source link is a link that contains more than one protocol inside. It will not work as a protocol link described above, but you will need to set it up differently.</p><p>Navigate to the <code>General Options</code> in the <code>Configuration Section</code> and switch to the <code>Subscriptions</code> tab.<br><img src="'+n+'" alt="source link"><br> You can save it, then the window will be reloaded. Or you can give a temporary link and press the button <code>fetch</code> below the textarea.</p><p><img src="'+i+'" alt="fetch"></p><p>The system will fetch the links from the Subscription source. Visually nothing happened. You can close the window.</p><p>However, if you create a new outbound proxy, you will get a list of available subscriptions you can pick from the list <code>Available Subscription Configuration</code><br><img src="'+s+'" alt="available subscriptions"></p><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>The drop-down is only available when the specific type of subscription was fetched from the URL.</p></div><p>Now you can select the subscription object from the drop-down and apply the configuration settings automatically.</p><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>The difference between subscription source and subscription protocol is granularity. If the link contains one item - you can insert it into the Subscription URL field and this will perform an automatic reload during service restart. Conversely, when it contains more than one source, it will display a drop-down list per outbound connection. This will require you to reapply the settings when changes are performed on the remote side.</p></div><h2 id="automatic-subscription-refresh" tabindex="-1"><a class="header-anchor" href="#automatic-subscription-refresh"><span>Automatic Subscription Refresh</span></a></h2><p>By default, subscription sources are only fetched when you manually press the <code>Fetch</code> button. If your subscription provider updates server endpoints frequently, you can enable automatic refresh so your server list stays up to date without manual intervention.</p><p>In <code>General Options</code> → <code>Subscriptions</code> tab, find the <strong>Auto-refresh interval</strong> setting and choose a schedule:</p><ul><li><strong>Disabled</strong> — manual refresh only (default)</li><li><strong>3 hours</strong> — re-fetches your subscription sources every 3 hours</li><li><strong>6 hours</strong> — every 6 hours</li><li><strong>12 hours</strong> — every 12 hours</li></ul><p><img src="'+p+'" alt="autosubs"></p><p>The refresh runs silently in the background via a cron job. It uses the same subscription links you already configured in the text area above.</p><h2 id="auto-fallback" tabindex="-1"><a class="header-anchor" href="#auto-fallback"><span>Auto-Fallback</span></a></h2><p>Auto-fallback is designed for situations where your ISP or network blocks a proxy endpoint. When enabled, XRAYUI will periodically check whether your active proxy is reachable. If it detects that the endpoint is down, it will automatically switch to the next working server from your subscription pool. Your routing rules, DNS settings, and everything else stay intact — only the connection details change.</p><p><img src="'+h+'" alt="autofall"></p><h3 id="how-to-enable" tabindex="-1"><a class="header-anchor" href="#how-to-enable"><span>How to Enable</span></a></h3><p>There are two parts to the setup:</p><p><strong>1. Global toggle</strong> — In <code>General Options</code> → <code>Subscriptions</code> tab:</p><ul><li>Enable the <strong>Auto-fallback</strong> checkbox. This turns on the health monitoring system.</li><li>Choose a <strong>Health check interval</strong> (2, 5, or 10 minutes). This controls how often the system checks if your endpoints are still alive.</li></ul><div class="hint-container important"><p class="hint-container-title">Important</p><p>Auto-fallback requires the <strong>Connection Check</strong> feature to be enabled in General Options. Connection Check is what allows Xray to monitor whether your endpoints are alive. If it is disabled, the auto-fallback options will show a message explaining this requirement.</p></div><p><strong>2. Per-outbound opt-in</strong> — In each outbound&#39;s settings:</p><ul><li>First, select an endpoint from the <code>Available Subscription Configuration</code> dropdown (this requires subscription sources to be fetched).</li><li>Then enable the <strong>Auto-fallback pool</strong> checkbox. This links the outbound back to the subscription pool for automatic recovery.</li></ul><div class="hint-container info"><p class="hint-container-title">Info</p><p>Only outbounds that have the <strong>Auto-fallback pool</strong> checkbox enabled will participate in automatic switching. Other outbounds are left untouched.</p></div><h3 id="probe-url" tabindex="-1"><a class="header-anchor" href="#probe-url"><span>Probe URL</span></a></h3><p>By default, the Connection Check verifies endpoint health by sending a request to <code>https://www.google.com/generate_204</code>. If this URL is not suitable for your environment (for example, if it is blocked in your region), you can change it in <code>General Options</code> → <code>Subscriptions</code> tab under <strong>Probe URL</strong>.</p><p><img src="'+d+'" alt="prob"></p><p>The probe URL must return an HTTP <code>204 No Content</code> response to be considered successful. Any endpoint that returns 204 will work.</p><h3 id="rotation-filters" tabindex="-1"><a class="header-anchor" href="#rotation-filters"><span>Rotation Filters</span></a></h3><p>If your subscription pool contains servers in many regions but you only want to rotate through a subset, you can set <strong>Rotation filters</strong> in <code>General Options</code> → <code>Subscriptions</code> tab.</p><p>Enter comma-separated keywords (e.g., <code>Canada, Denmark</code>). When auto-fallback rotates to a new server, only subscription links whose name or URL contains at least one of these keywords will be considered. Links that do not match any keyword are skipped.</p><p>If no filters are set, or if none of the keywords match any links in the pool, the full subscription pool is used as before.</p><h3 id="how-it-works" tabindex="-1"><a class="header-anchor" href="#how-it-works"><span>How It Works</span></a></h3><p>The system checks your pool-enabled outbounds on the schedule you configured. For each one:</p><ol><li>It checks whether the endpoint is alive using the <strong>Connection Check</strong> feature. Xray continuously probes your configured endpoints and provides reliable, up-to-date health status.</li><li>If a check fails, it does not switch immediately. It waits for <strong>3 consecutive failures</strong> to avoid reacting to temporary network glitches.</li><li>After 3 failures, it switches to the next server in your subscription pool (filtered by your rotation filters, if any). The Connection Check will verify the new server&#39;s health on the next check cycle.</li><li>The switch is performed instantly via the <strong>Xray API</strong> with near-zero downtime. If the API is unavailable, the system falls back to a full Xray restart automatically.</li></ol><div class="hint-container info"><p class="hint-container-title">Info</p><p>Subscription pool settings are preserved across Xray restarts. You do not need to reconfigure the pool after restarting the service.</p></div><p>A built-in safety limit prevents excessive switching — no more than 5 switches per hour per outbound. If all endpoints in the pool are unreachable, the system clears its failed list and retries on the next cycle.</p>',61)])])}const y=a(u,[["render",b]]),w=JSON.parse('{"path":"/en/subscriptions.html","title":"Guide to Subscriptions","lang":"en-US","frontmatter":{},"git":{"updatedTime":1771786039000,"contributors":[{"name":"Daniel Lavrushin","username":"","email":"lavrushin@gmail.com","commits":3}],"changelog":[{"hash":"5a18adf713c91174590905f3316a07e9d42b3e2b","time":1771786039000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Refactor code structure for improved readability and maintainability"},{"hash":"7e629facadbecbbcb75d4bd9f4bea1fa6e4ecedc","time":1771628416000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Implement failover mechanism in failover.sh for managing outbound connections"},{"hash":"765a7c9eeb483183d788f5e05031b20e1923c87a","time":1753992472000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"docs: add comprehensive guide to subscriptions in XRAYUI"}]},"filePathRelative":"en/subscriptions.md"}');export{y as comp,w as data};
