import{_ as e}from"./20250816215559-LfT-XQO0.js";import{_ as o,c as r,a as n,o as s}from"./app-eTybrgsj.js";const a="/asuswrt-merlin-xrayui/assets/20250816215744-DWVDGOB8.png",i="/asuswrt-merlin-xrayui/assets/20250816215828-FWDgv_p0.png",d="/asuswrt-merlin-xrayui/assets/20250816215939-IhNqi5HX.png",l={};function p(c,t){return s(),r("div",null,t[0]||(t[0]=[n('<h1 id="transparent-proxy-tproxy" tabindex="-1"><a class="header-anchor" href="#transparent-proxy-tproxy"><span>Transparent Proxy (TPROXY)</span></a></h1><p>XRAYUI supports two router modes:</p><ul><li><code>REDIRECT</code> mode</li><li><code>TPROXY</code> mode</li></ul><h2 id="what-is-redirect" tabindex="-1"><a class="header-anchor" href="#what-is-redirect"><span>What is REDIRECT</span></a></h2><p><code>REDIRECT</code> uses NAT (iptables <code>REDIRECT</code>/DNAT in <code>PREROUTING</code>) to divert traffic to a local listening port (your <strong>dokodemo</strong> inbound).<br> Key characteristics:</p><ul><li>Simple to deploy; no policy routing or fwmarks required.</li><li>Primarily suited for TCP. UDP and QUIC/HTTP-3 are unreliable in this mode.</li><li>The original destination address/port is not preserved, which can limit advanced routing and certain protocol behaviors.</li></ul><h2 id="what-is-tproxy" tabindex="-1"><a class="header-anchor" href="#what-is-tproxy"><span>What is TPROXY</span></a></h2><p><code>TPROXY</code> (Transparent Proxy) uses the iptables <code>TPROXY</code> target (mangle table) together with policy routing and fwmarks. Xray binds with <code>IP_TRANSPARENT</code>, so it receives packets while preserving the original destination (and source) addresses.<br> Key benefits:</p><ul><li>Handles both TCP and UDP reliably, including QUIC/HTTP-3.</li><li>Preserves the original destination, enabling accurate routing decisions and fewer protocol edge cases.</li><li>Recommended for most setups.</li></ul><div class="hint-container info"><p class="hint-container-title">Info</p><p>XRAYUI automatically manages the necessary firewall and policy-routing rules when TPROXY is enabled.</p></div><h2 id="tproxy-vs-redirect-on-asuswrt-merlin" tabindex="-1"><a class="header-anchor" href="#tproxy-vs-redirect-on-asuswrt-merlin"><span>TPROXY vs REDIRECT on Asuswrt-Merlin</span></a></h2><p>XRAYUI on Asuswrt-Merlin does the heavy lifting for you. Pick the mode that matches what you do most, then click <strong>Apply</strong>.</p><table><thead><tr><th>What you’re doing</th><th>Pick this</th><th>Why it helps</th></tr></thead><tbody><tr><td>Online gaming &amp; voice chat</td><td><strong>TPROXY</strong></td><td>Smoother for game traffic and party chat; fewer random drops.</td></tr><tr><td>Streaming video — YouTube, 4K, IPTV</td><td><strong>TPROXY</strong></td><td>Modern streams may use QUIC/HTTP-3; TPROXY tends to buffer less.</td></tr><tr><td>Video calls — Zoom/Teams/Meet</td><td><strong>TPROXY</strong></td><td>More reliable audio/video paths; fewer “can you hear me?” moments.</td></tr><tr><td>Downloads &amp; torrents</td><td><strong>TPROXY</strong></td><td>Works better when apps use UDP trackers and DHT.</td></tr><tr><td>Everyday web, email, online banking</td><td><strong>REDIRECT</strong></td><td>Simple and stable for classic browsing. If a site is picky, use a bypass rule.</td></tr><tr><td>Smart TVs, consoles, set-top boxes</td><td><strong>TPROXY</strong></td><td>Best for mixed apps and streaming on living-room gear.</td></tr><tr><td>Smart home, printers, local NAS</td><td><strong>REDIRECT</strong></td><td>Keep it simple; most of this traffic is local-friendly.</td></tr><tr><td>Older/low-power router or quick tests</td><td><strong>REDIRECT</strong></td><td>Lighter and fastest to try. Switch to TPROXY later if you need it.</td></tr></tbody></table><p><strong>Rule of thumb (tommerfingerregel):</strong><br> If you game, stream, or do lots of calls, start with <strong>TPROXY</strong>.<br> If you’re just browsing or testing, <strong>REDIRECT</strong> is fine.</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>Mixed household? Use <strong>TPROXY</strong> as your default, then exclude a device or port with <strong>Bypass/Redirect Policy</strong> if something misbehaves.</p></div><div class="hint-container note"><p class="hint-container-title">Note</p><p>After changing the mode on your <strong>dokodemo</strong> inbound, return to the main page and click <strong>Apply</strong> , so XRAYUI can update your router rules.</p></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Most of modern ASUS routers (AC/AX/BE) support <code>TPROXY</code>. If your firmware doesn’t support <code>TPROXY</code> on this model, choose <strong>REDIRECT</strong>. You can always switch later if you upgrade.</p></div><h2 id="how-to-switch-to-tproxy" tabindex="-1"><a class="header-anchor" href="#how-to-switch-to-tproxy"><span>How to Switch to TPROXY</span></a></h2><p>XRAY/XRAYUI generally works best in TPROXY mode. It is recommended to switch your main inbound to TPROXY.</p><p><img src="'+e+'" alt="transport"></p><ol><li><p>In <strong>Inbounds</strong>, locate your primary <strong>dokodemo</strong> inbound (often tagged <code>all-in</code>).<br> Click the <strong>transport</strong> link next to it.</p><p>The <strong>Inbound Transport</strong> modal will open.</p><p><img src="'+a+'" alt="modal"></p></li><li><p>Find the <strong>Transparent Proxy (tproxy)</strong> row and click <strong>manage</strong>.<br><img src="'+i+'" alt="manage transport"></p></li><li><p>In the <strong>Transparent proxy settings</strong> modal, set <strong>Enable transparent proxy</strong> to <code>tproxy</code>.<br><img src="'+d+'" alt="tproxy"></p></li><li><p>Click <strong>Save</strong>. Confirm that an orange <code>tproxy</code> badge appears next to the dokodemo inbound.</p></li><li><p>Go back to the main page and click <strong>Apply</strong> to push the changes to the router and restart Xray if required.</p></li></ol>',21)]))}const m=o(l,[["render",p]]),u=JSON.parse('{"path":"/en/tproxy.html","title":"Transparent Proxy (TPROXY)","lang":"en-US","frontmatter":{},"git":{"updatedTime":1755376010000,"contributors":[{"name":"Daniel Lavrushin","username":"","email":"lavrushin@gmail.com","commits":1}],"changelog":[{"hash":"11d81a64c796237091b4ea2611b463785fe498ef","time":1755376010000,"email":"lavrushin@gmail.com","author":"Daniel Lavrushin","message":"Add documentation for Transparent Proxy (TPROXY) in English and Russian"}]},"filePathRelative":"en/tproxy.md"}');export{m as comp,u as data};
