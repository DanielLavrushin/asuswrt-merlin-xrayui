<!doctype html>
<html lang="ru-RU">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Утечки DNS и как их избежать | XrayUI</title><meta name="description" content="">
    <link rel="preload" href="/asuswrt-merlin-xrayui/assets/style-KwXFwar5.css" as="style"><link rel="stylesheet" href="/asuswrt-merlin-xrayui/assets/style-KwXFwar5.css">
    <link rel="modulepreload" href="/asuswrt-merlin-xrayui/assets/app-eTybrgsj.js"><link rel="modulepreload" href="/asuswrt-merlin-xrayui/assets/dns-leak.html-bisDTiaZ.js">
    <link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/index.html-ZL0zZxfL.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/b4sni.html-Ba3o12Ck.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/br-policy.html-C-4UgqTA.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/changelog.html-CKPX_XYB.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/cli.html-Dqe7zj4l.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/custom-geodata.html-USELws9i.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/dns-leak.html-_hjwJI3_.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/general-options.html-DlpELEzm.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/import-config.html-_P18D6km.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/install.html-C42kObjO.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/interface.html-DcAHGYjV.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/routing.html-CMUZd7BC.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/rtls-scanner.html-BTaMzcn2.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/share-config.html-CwlwcHw_.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/subscriptions.html-BZ6vrsbx.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/tproxy.html-K22hdfAS.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/v2dat.html-1iHror3G.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/b4sni.html-BixeTGKS.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/br-policy.html-DIrOI7N7.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/changelog.html-Cb6G9TzF.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/cli.html-HzOqq1hm.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/custom-geodata.html-QDGiGKSh.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/general-options.html-BZiDNEGz.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/import-config.html-CM88-Y8F.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/index.html-C2vSMad_.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/install.html-B-I2-Ks-.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/interface.html-CNiu5LVc.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/routing.html-BVi6wY0Z.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/rtls-scanner.html-j_0TSXr8.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/share-config.html-tq5eAy9L.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/subscriptions.html-D72aw0Ef.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/tproxy.html-DCXOnUpY.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/v2dat.html-1Jijv1yf.js" as="script"><link rel="prefetch" href="/asuswrt-merlin-xrayui/assets/404.html-D8InpyWK.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/asuswrt-merlin-xrayui/ru/"><img class="vp-site-logo" src="/asuswrt-merlin-xrayui/images/logo.png" alt="XrayUI"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">XrayUI</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Руководства"><span class="title">Руководства</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Руководства"><span class="title">Руководства</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/install" aria-label="Как установить"><!--[--><!--[--><!--]--><!--]-->Как установить<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/interface" aria-label="Обзор интерфейса"><!--[--><!--[--><!--]--><!--]-->Обзор интерфейса<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/routing" aria-label="Руководство по правилам маршрутизации"><!--[--><!--[--><!--]--><!--]-->Руководство по правилам маршрутизации<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/general-options" aria-label="Общие параметры"><!--[--><!--[--><!--]--><!--]-->Общие параметры<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/import-config" aria-label="Импорт конфигурации"><!--[--><!--[--><!--]--><!--]-->Импорт конфигурации<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/br-policy" aria-label="Политика обхода/перенаправления"><!--[--><!--[--><!--]--><!--]-->Политика обхода/перенаправления<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/subscriptions" aria-label="Управление подписками"><!--[--><!--[--><!--]--><!--]-->Управление подписками<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/asuswrt-merlin-xrayui/ru/dns-leak" aria-label="Утечки DNS и как их избежать"><!--[--><!--[--><!--]--><!--]-->Утечки DNS и как их избежать<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/share-config" aria-label="Безопасный обмен конфигом"><!--[--><!--[--><!--]--><!--]-->Безопасный обмен конфигом<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/tproxy" aria-label="Прозрачный прокси (TPROXY)"><!--[--><!--[--><!--]--><!--]-->Прозрачный прокси (TPROXY)<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/rtls-scanner" aria-label="Сканер Reality TLS"><!--[--><!--[--><!--]--><!--]-->Сканер Reality TLS<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/custom-geodata" aria-label="Пользовательские файлы геоданных"><!--[--><!--[--><!--]--><!--]-->Пользовательские файлы геоданных<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/v2dat" aria-label="Инспекция баз данных Geosite и GeoIP"><!--[--><!--[--><!--]--><!--]-->Инспекция баз данных Geosite и GeoIP<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/b4sni" aria-label="B4SNI: Инспекция SNI"><!--[--><!--[--><!--]--><!--]-->B4SNI: Инспекция SNI<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/cli" aria-label="Команды (CLI)"><!--[--><!--[--><!--]--><!--]-->Команды (CLI)<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/changelog" aria-label="Список изменений"><!--[--><!--[--><!--]--><!--]-->Список изменений<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/asuswrt-merlin-xrayui/ru/dns-leak" aria-label="Russian"><!--[--><!--[--><!--]--><!--]-->Russian<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Руководства"><span class="title">Руководства</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Руководства"><span class="title">Руководства</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/install" aria-label="Как установить"><!--[--><!--[--><!--]--><!--]-->Как установить<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/interface" aria-label="Обзор интерфейса"><!--[--><!--[--><!--]--><!--]-->Обзор интерфейса<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/routing" aria-label="Руководство по правилам маршрутизации"><!--[--><!--[--><!--]--><!--]-->Руководство по правилам маршрутизации<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/general-options" aria-label="Общие параметры"><!--[--><!--[--><!--]--><!--]-->Общие параметры<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/import-config" aria-label="Импорт конфигурации"><!--[--><!--[--><!--]--><!--]-->Импорт конфигурации<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/br-policy" aria-label="Политика обхода/перенаправления"><!--[--><!--[--><!--]--><!--]-->Политика обхода/перенаправления<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/subscriptions" aria-label="Управление подписками"><!--[--><!--[--><!--]--><!--]-->Управление подписками<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/asuswrt-merlin-xrayui/ru/dns-leak" aria-label="Утечки DNS и как их избежать"><!--[--><!--[--><!--]--><!--]-->Утечки DNS и как их избежать<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/share-config" aria-label="Безопасный обмен конфигом"><!--[--><!--[--><!--]--><!--]-->Безопасный обмен конфигом<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/tproxy" aria-label="Прозрачный прокси (TPROXY)"><!--[--><!--[--><!--]--><!--]-->Прозрачный прокси (TPROXY)<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/rtls-scanner" aria-label="Сканер Reality TLS"><!--[--><!--[--><!--]--><!--]-->Сканер Reality TLS<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/custom-geodata" aria-label="Пользовательские файлы геоданных"><!--[--><!--[--><!--]--><!--]-->Пользовательские файлы геоданных<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/v2dat" aria-label="Инспекция баз данных Geosite и GeoIP"><!--[--><!--[--><!--]--><!--]-->Инспекция баз данных Geosite и GeoIP<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/b4sni" aria-label="B4SNI: Инспекция SNI"><!--[--><!--[--><!--]--><!--]-->B4SNI: Инспекция SNI<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/cli" aria-label="Команды (CLI)"><!--[--><!--[--><!--]--><!--]-->Команды (CLI)<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/ru/changelog" aria-label="Список изменений"><!--[--><!--[--><!--]--><!--]-->Список изменений<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/asuswrt-merlin-xrayui/" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/asuswrt-merlin-xrayui/ru/dns-leak" aria-label="Russian"><!--[--><!--[--><!--]--><!--]-->Russian<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Руководства <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/install" aria-label="Как установить"><!--[--><!--[--><!--]--><!--]-->Как установить<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/interface" aria-label="Обзор интерфейса"><!--[--><!--[--><!--]--><!--]-->Обзор интерфейса<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/routing" aria-label="Руководство по правилам маршрутизации"><!--[--><!--[--><!--]--><!--]-->Руководство по правилам маршрутизации<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/general-options" aria-label="Общие параметры"><!--[--><!--[--><!--]--><!--]-->Общие параметры<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/import-config" aria-label="Импорт конфигурации"><!--[--><!--[--><!--]--><!--]-->Импорт конфигурации<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/br-policy" aria-label="Политика обхода/перенаправления"><!--[--><!--[--><!--]--><!--]-->Политика обхода/перенаправления<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/subscriptions" aria-label="Управление подписками"><!--[--><!--[--><!--]--><!--]-->Управление подписками<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/asuswrt-merlin-xrayui/ru/dns-leak" aria-label="Утечки DNS и как их избежать"><!--[--><!--[--><!--]--><!--]-->Утечки DNS и как их избежать<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/share-config" aria-label="Безопасный обмен конфигом"><!--[--><!--[--><!--]--><!--]-->Безопасный обмен конфигом<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/tproxy" aria-label="Прозрачный прокси (TPROXY)"><!--[--><!--[--><!--]--><!--]-->Прозрачный прокси (TPROXY)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/rtls-scanner" aria-label="Сканер Reality TLS"><!--[--><!--[--><!--]--><!--]-->Сканер Reality TLS<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/custom-geodata" aria-label="Пользовательские файлы геоданных"><!--[--><!--[--><!--]--><!--]-->Пользовательские файлы геоданных<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/v2dat" aria-label="Инспекция баз данных Geosite и GeoIP"><!--[--><!--[--><!--]--><!--]-->Инспекция баз данных Geosite и GeoIP<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/asuswrt-merlin-xrayui/ru/b4sni" aria-label="B4SNI: Инспекция SNI"><!--[--><!--[--><!--]--><!--]-->B4SNI: Инспекция SNI<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/asuswrt-merlin-xrayui/ru/cli" aria-label="Команды (CLI)"><!--[--><!--[--><!--]--><!--]-->Команды (CLI)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/asuswrt-merlin-xrayui/ru/changelog" aria-label="Changelog"><!--[--><!--[--><!--]--><!--]-->Changelog<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="утечки-dns-и-как-их-избежать" tabindex="-1"><a class="header-anchor" href="#утечки-dns-и-как-их-избежать"><span>Утечки DNS и как их избежать</span></a></h1><p><strong>Утечка DNS</strong> возникает, когда DNS-запросы уходят вне вашего зашифрованного туннеля. Это позволяет вашему провайдеру (ISP) или другим участникам на пути видеть запрашиваемые домены, даже если сам трафик проксируется или зашифрован VPN.</p><p>В рамках этого руководства «без утечки DNS» означает, что ваши DNS-запросы <strong>не</strong> уходят напрямую через линк вашего провайдера. Они должны проходить через ваш туннель (например, к VPS) или иной контролируемый вами путь.</p><h2 id="проверка-на-утечки" tabindex="-1"><a class="header-anchor" href="#проверка-на-утечки"><span>Проверка на утечки</span></a></h2><p>Воспользуйтесь любым из сервисов:</p><ul><li><a href="https://www.browserscan.net/ru/dns-leak" target="_blank" rel="noopener noreferrer">browserscan.net</a></li><li><a href="https://dnsleaktest.com/" target="_blank" rel="noopener noreferrer">dnsleaktest.com</a></li><li><a href="https://browserleaks.com/dns" target="_blank" rel="noopener noreferrer">browserleaks.com</a></li><li><a href="https://controld.com/tools/dns-leak-test" target="_blank" rel="noopener noreferrer">controld.com</a></li><li><a href="https://nordvpn.com/ru/dns-leak-test/" target="_blank" rel="noopener noreferrer">nordvpn.com</a></li><li><a href="https://surfshark.com/ru/dns-leak-test" target="_blank" rel="noopener noreferrer">surfshark.com</a></li><li><a href="https://www.astrill.com/ru/dns-leak-test" target="_blank" rel="noopener noreferrer">atrill.com</a></li></ul><div class="hint-container tip"><p class="hint-container-title">Как читать результаты</p><ul><li>Игнорируйте итоговые метки вроде <strong>«protected/not protected»</strong>. Многие сайты считают «<strong>не защищённым</strong>» всё, что не использует их собственный резолвер.</li><li>Смотрите на список IP DNS-серверов и их географию.</li><li>Если указанные DNS-серверы находятся в локации вашего VPS (или в точке присутствия выбранного вами резолвера) и вы не видите DNS вашего провайдера из вашей страны — <strong>утечки к провайдеру нет</strong>.</li></ul></div><p><strong>Решение</strong>: добавьте отдельный DNS-входящий интерфейс (inbound), который явно дозванивается до резолвера и отправляет запросы через ваш исходящий туннель.</p><h2 id="настроика-в-xrayui" tabindex="-1"><a class="header-anchor" href="#настроика-в-xrayui"><span>Настройка в XRAYUI</span></a></h2><div class="hint-container important"><p class="hint-container-title">Важно</p><p>Руководство применимо к <strong>XRAYUI v0.58.0</strong> и новее. Проверить версию: <code>xrayui version</code>.</p></div><p>Ваш основной inbound (например, <code>dokodemo-door</code> с включённым <code>Follow redirect</code>) предназначен для прозрачного перехвата (<code>TPROXY</code>) и пересылает трафик на исходный адрес назначения. Когда DNS-форвардер роутера (dnsmasq) обращается к <code>127.0.0.1</code>, «исходного назначения» нет — это может вызывать зацикленность и нестабильную отправку DNS вверх по цепочке.</p><h3 id="создание-выделенного-dns-inbound" tabindex="-1"><a class="header-anchor" href="#создание-выделенного-dns-inbound"><span>Создание выделенного DNS-inbound</span></a></h3><p>Добавьте новый inbound типа <code>DOKODEMO</code>:</p><ul><li><strong>Порт</strong>: локальный порт для DNS-inbound (например, 55100)</li><li><strong>Следовать перенаправлению</strong>: ВЫКЛ</li><li><strong>Адрес назначения</strong>: публичный резолвер (например, 8.8.8.8, 1.1.1.1, AdGuard) или ваш собственный DNS на VPS</li><li><strong>Порт назначения</strong>: 53</li><li><strong>Сеть</strong>: udp,tcp</li><li>Сохраните.</li></ul><p><img src="/asuswrt-merlin-xrayui/assets/20250803155225-f3GwELhW.png" alt="add dokodemo"></p><div class="hint-container note"><p class="hint-container-title">Заметка</p><p>Флажок <strong>Следовать перенаправлению</strong> должен быть снят. Это важно для предотвращения утечки DNS. Не включайте его для этого inbound.</p></div><h3 id="настроика-транспорта-tproxy-и-dialer" tabindex="-1"><a class="header-anchor" href="#настроика-транспорта-tproxy-и-dialer"><span>Настройка транспорта (tproxy) и dialer</span></a></h3><p>Откройте <strong>Трансопрт</strong> для этого DNS-inbound → <strong>Прозрачный прокси (tproxy)</strong> → <strong>настроить</strong>:</p><ul><li>Включите <code>tproxy</code> для inbound.</li><li>Закройте окно и нажмите <code>применить</code> в основной форме.</li></ul><p><img src="/asuswrt-merlin-xrayui/assets/20250803163324-oScUk-VS.png" alt="tproxy"></p><h3 id="правила-маршрутизации-dns-запросов" tabindex="-1"><a class="header-anchor" href="#правила-маршрутизации-dns-запросов"><span>Правила маршрутизации DNS запросов</span></a></h3><p>Когда мы настроили исходящие и входящие прокси, необходимо также настроить и правило маршрутизации. Нам нужно, чтобы весь трафик с нашего нового inbound шел в нужный outbound.</p><ul><li>Создаем новое правило (желательно ближе к началу списка)</li><li>Выбираем только наш днс inbound в качестве входящего соединения</li><li>Выбираем наш прокси в качестве исходящего соединения</li><li>Сохраняем правило. Больше ничего в нем настраивать не нужно.</li></ul><p><img src="/asuswrt-merlin-xrayui/assets/20250803163758-Cz6aNT-t.png" alt="правило"> Таким образом мы настроили маршрутизацию так, что все, что приходит в днс-инбаунд будет уходить в наш прокси аутбаунд.</p><h3 id="включение-«предотвращение-утечек-dns»" tabindex="-1"><a class="header-anchor" href="#включение-«предотвращение-утечек-dns»"><span>Включение «Предотвращение утечек DNS»</span></a></h3><p>Перейдите в <code>Общие настройки</code> → <code>DNS</code> и включите <strong>Предотвращение утечек DNS</strong>.</p><p>Опция заставляет роутер (dnsmasq) использовать только ваш DNS-inbound Xray и отключает альтернативные системные резолверы. <img src="/asuswrt-merlin-xrayui/assets/20250803164552-CC270k7H.png" alt="dns on"></p><div class="hint-container warning"><p class="hint-container-title">Примечание</p><p>Эта опция не создаёт и не настраивает <code>inbound</code> автоматически; включайте её после того, как DNS-inbound заработал. Раннее включение может временно нарушить резолвинг.</p></div><h2 id="тестирование" tabindex="-1"><a class="header-anchor" href="#тестирование"><span>Тестирование</span></a></h2><p>Для тестирования нам необходимо будет создать дополнительное правило - проксирование трафика через наш прокси и укажем сервисы выше в нем (для примера возьмем browserleaks.com)</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">browserleaks.com</span>
<span class="line">browserleaks.org</span>
<span class="line">browserleaks.net</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/asuswrt-merlin-xrayui/assets/20250803165258-DJs1p5sr.png" alt="browserleaks to proxy"></p><p>Заходим на <code>browserleaks.com</code> и убеждаемся, что все источники идут через ваш VPS.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Последнее обновление: </span><time class="meta-item-info" datetime="2025-08-03T16:11:39.000Z" data-allow-mismatch>03.08.2025, 16:11</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: lavrushin@gmail.com">Daniel Lavrushin</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/asuswrt-merlin-xrayui/ru/subscriptions" aria-label="Управление подписками"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">Управление подписками</span></div><!--]--></a><a class="route-link auto-link next" href="/asuswrt-merlin-xrayui/ru/share-config" aria-label="Безопасный обмен конфигом"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Безопасный обмен конфигом</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/asuswrt-merlin-xrayui/assets/app-eTybrgsj.js" defer></script>
  </body>
</html>
